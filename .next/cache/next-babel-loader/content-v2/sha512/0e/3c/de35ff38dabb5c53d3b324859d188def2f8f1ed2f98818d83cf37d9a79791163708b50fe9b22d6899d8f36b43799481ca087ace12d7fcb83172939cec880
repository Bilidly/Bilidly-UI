{"ast":null,"code":"import _defineProperty from \"/Users/pierremarieriviere/Code/solidly-master/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/pierremarieriviere/Code/solidly-master/components/ssVotes/ssVotes.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Paper, Typography, Button, CircularProgress, InputAdornment, TextField, MenuItem, Select, Grid } from '@material-ui/core';\nimport BigNumber from 'bignumber.js';\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { useRouter } from \"next/router\";\nimport classes from './ssVotes.module.css';\nimport { formatCurrency } from '../../utils';\nimport GaugesTable from './ssVotesTable.js';\nimport stores from '../../stores';\nimport { ACTIONS } from '../../stores/constants';\nexport default function ssVotes() {\n  _s();\n\n  var _this = this,\n      _jsxDEV2,\n      _jsxDEV3,\n      _jsxDEV4;\n\n  var router = useRouter();\n\n  var _useState = useState(),\n      updateState = _useState[1];\n\n  var forceUpdate = useCallback(function () {\n    return updateState({});\n  }, []);\n\n  var _useState2 = useState([]),\n      gauges = _useState2[0],\n      setGauges = _useState2[1];\n\n  var _useState3 = useState(false),\n      voteLoading = _useState3[0],\n      setVoteLoading = _useState3[1];\n\n  var _useState4 = useState([]),\n      votes = _useState4[0],\n      setVotes = _useState4[1];\n\n  var _useState5 = useState(null),\n      veToken = _useState5[0],\n      setVeToken = _useState5[1];\n\n  var _useState6 = useState(null),\n      token = _useState6[0],\n      setToken = _useState6[1];\n\n  var _useState7 = useState([]),\n      vestNFTs = _useState7[0],\n      setVestNFTs = _useState7[1];\n\n  var _useState8 = useState(''),\n      search = _useState8[0],\n      setSearch = _useState8[1];\n\n  var ssUpdated = function ssUpdated() {\n    setVeToken(stores.stableSwapStore.getStore('veToken'));\n    var as = stores.stableSwapStore.getStore('pairs');\n    var filteredAssets = as.filter(function (asset) {\n      return asset.gauge && asset.gauge.address;\n    });\n    setGauges(filteredAssets);\n    var nfts = stores.stableSwapStore.getStore('vestNFTs');\n    setVestNFTs(nfts);\n\n    if (nfts && nfts.length > 0) {\n      setToken(nfts[0]);\n    }\n\n    if (nfts && nfts.length > 0 && filteredAssets && filteredAssets.length > 0) {\n      stores.dispatcher.dispatch({\n        type: ACTIONS.GET_VEST_VOTES,\n        content: {\n          tokenID: nfts[0].id\n        }\n      });\n      stores.dispatcher.dispatch({\n        type: ACTIONS.GET_VEST_BALANCES,\n        content: {\n          tokenID: nfts[0].id\n        }\n      });\n    }\n\n    forceUpdate();\n  };\n\n  useEffect(function () {\n    var vestVotesReturned = function vestVotesReturned(vals) {\n      setVotes(vals.map(function (asset) {\n        return {\n          address: asset === null || asset === void 0 ? void 0 : asset.address,\n          value: BigNumber(asset && asset.votePercent ? asset.votePercent : 0).toNumber(0)\n        };\n      }));\n      forceUpdate();\n    };\n\n    var vestBalancesReturned = function vestBalancesReturned(vals) {\n      setGauges(vals);\n      forceUpdate();\n    };\n\n    var stableSwapUpdated = function stableSwapUpdated() {\n      ssUpdated();\n    };\n\n    var voteReturned = function voteReturned() {\n      setVoteLoading(false);\n    };\n\n    ssUpdated(); // stores.dispatcher.dispatch({ type: ACTIONS.GET_VEST_NFTS, content: {} })\n\n    stores.emitter.on(ACTIONS.UPDATED, stableSwapUpdated);\n    stores.emitter.on(ACTIONS.VOTE_RETURNED, voteReturned);\n    stores.emitter.on(ACTIONS.ERROR, voteReturned);\n    stores.emitter.on(ACTIONS.VEST_VOTES_RETURNED, vestVotesReturned); // stores.emitter.on(ACTIONS.VEST_NFTS_RETURNED, vestNFTsReturned)\n\n    stores.emitter.on(ACTIONS.VEST_BALANCES_RETURNED, vestBalancesReturned);\n    return function () {\n      stores.emitter.removeListener(ACTIONS.UPDATED, stableSwapUpdated);\n      stores.emitter.removeListener(ACTIONS.VOTE_RETURNED, voteReturned);\n      stores.emitter.removeListener(ACTIONS.ERROR, voteReturned);\n      stores.emitter.removeListener(ACTIONS.VEST_VOTES_RETURNED, vestVotesReturned); // stores.emitter.removeListener(ACTIONS.VEST_NFTS_RETURNED, vestNFTsReturned)\n\n      stores.emitter.removeListener(ACTIONS.VEST_BALANCES_RETURNED, vestBalancesReturned);\n    };\n  }, []);\n\n  var onVote = function onVote() {\n    setVoteLoading(true);\n    stores.dispatcher.dispatch({\n      type: ACTIONS.VOTE,\n      content: {\n        votes: votes,\n        tokenID: token.id\n      }\n    });\n  };\n\n  var totalVotes = votes.reduce(function (acc, curr) {\n    return BigNumber(acc).plus(BigNumber(curr.value).lt(0) ? curr.value * -1 : curr.value).toNumber();\n  }, 0);\n\n  var handleChange = function handleChange(event) {\n    setToken(event.target.value);\n    stores.dispatcher.dispatch({\n      type: ACTIONS.GET_VEST_VOTES,\n      content: {\n        tokenID: event.target.value.id\n      }\n    });\n  };\n\n  var onSearchChanged = function onSearchChanged(event) {\n    setSearch(event.target.value);\n  };\n\n  var onBribe = function onBribe() {\n    router.push('/bribe/create');\n  };\n\n  var renderMediumInput = function renderMediumInput(value, options) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.textField,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.mediumInputContainer,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            lg: \"auto\",\n            md: \"auto\",\n            sm: 12,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              className: classes.smallText,\n              children: \"Please select your veNFT:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            lg: 6,\n            md: 6,\n            sm: 12,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.mediumInputAmount,\n              children: /*#__PURE__*/_jsxDEV(Select, {\n                fullWidth: true,\n                value: value,\n                onChange: handleChange,\n                InputProps: {\n                  className: classes.mediumInput\n                },\n                children: options && options.map(function (option) {\n                  return /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: option,\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: classes.menuOption,\n                      children: [/*#__PURE__*/_jsxDEV(Typography, {\n                        children: [\"Token #\", option.id]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 144,\n                        columnNumber: 27\n                      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(Typography, {\n                          align: \"right\",\n                          className: classes.smallerText,\n                          children: formatCurrency(option.lockValue)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 146,\n                          columnNumber: 29\n                        }, _this), /*#__PURE__*/_jsxDEV(Typography, {\n                          color: \"textSecondary\",\n                          className: classes.smallerText,\n                          children: veToken === null || veToken === void 0 ? void 0 : veToken.symbol\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 147,\n                          columnNumber: 29\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 145,\n                        columnNumber: 27\n                      }, _this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 143,\n                      columnNumber: 25\n                    }, _this)\n                  }, option.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 23\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.topBarContainer,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 1,\n        children: [/*#__PURE__*/_jsxDEV(Grid, (_jsxDEV3 = {\n          item: true,\n          lg: \"auto\"\n        }, _defineProperty(_jsxDEV3, \"lg\", \"auto\"), _defineProperty(_jsxDEV3, \"sm\", 12), _defineProperty(_jsxDEV3, \"xs\", 12), _defineProperty(_jsxDEV3, \"children\", /*#__PURE__*/_jsxDEV(Button, (_jsxDEV2 = {\n          variant: \"contained\",\n          color: \"secondary\",\n          className: classes.button,\n          startIcon: /*#__PURE__*/_jsxDEV(AddCircleOutlineIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 26\n          }, this),\n          size: \"large\"\n        }, _defineProperty(_jsxDEV2, \"className\", classes.buttonOverride), _defineProperty(_jsxDEV2, \"color\", \"primary\"), _defineProperty(_jsxDEV2, \"onClick\", onBribe), _defineProperty(_jsxDEV2, \"children\", /*#__PURE__*/_jsxDEV(Typography, {\n          className: classes.actionButtonText,\n          children: \"Create Bribe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 15\n        }, this)), _jsxDEV2), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }, this)), _jsxDEV3), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          lg: true,\n          md: true,\n          sm: 12,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            className: classes.searchContainer,\n            variant: \"outlined\",\n            fullWidth: true,\n            placeholder: \"FTM, MIM, 0x...\",\n            value: search,\n            onChange: onSearchChanged,\n            InputProps: {\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 19\n              }, this)\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, (_jsxDEV4 = {\n          item: true,\n          lg: \"auto\"\n        }, _defineProperty(_jsxDEV4, \"lg\", \"auto\"), _defineProperty(_jsxDEV4, \"sm\", 12), _defineProperty(_jsxDEV4, \"xs\", 12), _defineProperty(_jsxDEV4, \"children\", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.tokenIDContainer,\n          children: renderMediumInput(token, vestNFTs)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this)), _jsxDEV4), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 0,\n      className: classes.tableContainer,\n      children: /*#__PURE__*/_jsxDEV(GaugesTable, {\n        gauges: gauges.filter(function (pair) {\n          if (!search || search === '') {\n            return true;\n          }\n\n          var searchLower = search.toLowerCase();\n\n          if (pair.symbol.toLowerCase().includes(searchLower) || pair.address.toLowerCase().includes(searchLower) || pair.token0.symbol.toLowerCase().includes(searchLower) || pair.token0.address.toLowerCase().includes(searchLower) || pair.token0.name.toLowerCase().includes(searchLower) || pair.token1.symbol.toLowerCase().includes(searchLower) || pair.token1.address.toLowerCase().includes(searchLower) || pair.token1.name.toLowerCase().includes(searchLower)) {\n            return true;\n          }\n\n          return false;\n        }),\n        setParentSliderValues: setVotes,\n        defaultVotes: votes,\n        veToken: veToken,\n        token: token\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 10,\n      className: classes.actionButtons,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          lg: 6,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.infoSection,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              children: \"Voting Power Used: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              className: \"\".concat(BigNumber(totalVotes).gt(100) ? classes.errorText : classes.helpText),\n              children: [totalVotes, \" %\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          lg: 6,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            className: classes.buttonOverrideFixed,\n            variant: \"contained\",\n            size: \"large\",\n            color: \"primary\",\n            disabled: voteLoading || BigNumber(totalVotes).eq(0) || BigNumber(totalVotes).gt(100),\n            onClick: onVote,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.actionButtonText,\n              children: voteLoading ? \"Casting Votes\" : \"Cast Votes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this), voteLoading && /*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 10,\n              className: classes.loadingCircle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 32\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ssVotes, \"+TB9f3+1YqQ2UrvJ8iqzNGF80ow=\", false, function () {\n  return [useRouter];\n});","map":{"version":3,"sources":["/Users/pierremarieriviere/Code/solidly-master/components/ssVotes/ssVotes.js"],"names":["React","useState","useEffect","useCallback","Paper","Typography","Button","CircularProgress","InputAdornment","TextField","MenuItem","Select","Grid","BigNumber","AddCircleOutlineIcon","SearchIcon","useRouter","classes","formatCurrency","GaugesTable","stores","ACTIONS","ssVotes","router","updateState","forceUpdate","gauges","setGauges","voteLoading","setVoteLoading","votes","setVotes","veToken","setVeToken","token","setToken","vestNFTs","setVestNFTs","search","setSearch","ssUpdated","stableSwapStore","getStore","as","filteredAssets","filter","asset","gauge","address","nfts","length","dispatcher","dispatch","type","GET_VEST_VOTES","content","tokenID","id","GET_VEST_BALANCES","vestVotesReturned","vals","map","value","votePercent","toNumber","vestBalancesReturned","stableSwapUpdated","voteReturned","emitter","on","UPDATED","VOTE_RETURNED","ERROR","VEST_VOTES_RETURNED","VEST_BALANCES_RETURNED","removeListener","onVote","VOTE","totalVotes","reduce","acc","curr","plus","lt","handleChange","event","target","onSearchChanged","onBribe","push","renderMediumInput","options","textField","mediumInputContainer","smallText","mediumInputAmount","className","mediumInput","option","menuOption","smallerText","lockValue","symbol","container","topBarContainer","button","buttonOverride","actionButtonText","searchContainer","startAdornment","tokenIDContainer","tableContainer","pair","searchLower","toLowerCase","includes","token0","name","token1","actionButtons","infoSection","gt","errorText","helpText","buttonOverrideFixed","eq","loadingCircle"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Paper, Typography, Button, CircularProgress, InputAdornment, TextField, MenuItem, Select, Grid } from '@material-ui/core';\nimport BigNumber from 'bignumber.js';\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { useRouter } from \"next/router\";\n\nimport classes from './ssVotes.module.css';\nimport { formatCurrency } from '../../utils';\n\nimport GaugesTable from './ssVotesTable.js'\n\nimport stores from '../../stores'\nimport { ACTIONS } from '../../stores/constants';\n\nexport default function ssVotes() {\n  const router = useRouter()\n\n  const [, updateState] = useState();\n  const forceUpdate = useCallback(() => updateState({}), []);\n\n  const [ gauges, setGauges ] = useState([])\n  const [ voteLoading, setVoteLoading ] = useState(false)\n  const [ votes, setVotes ] = useState([])\n  const [ veToken, setVeToken ] = useState(null)\n  const [ token, setToken ] = useState(null)\n  const [ vestNFTs, setVestNFTs ] = useState([])\n  const [search, setSearch] = useState('');\n\n\n  const ssUpdated = () => {\n    setVeToken(stores.stableSwapStore.getStore('veToken'))\n    const as = stores.stableSwapStore.getStore('pairs');\n\n    const filteredAssets = as.filter((asset) => {\n      return asset.gauge && asset.gauge.address\n    })\n    setGauges(filteredAssets)\n\n\n    const nfts = stores.stableSwapStore.getStore('vestNFTs');\n    setVestNFTs(nfts)\n\n    if(nfts && nfts.length > 0) {\n      setToken(nfts[0]);\n    }\n\n    if(nfts && nfts.length > 0 && filteredAssets && filteredAssets.length > 0) {\n      stores.dispatcher.dispatch({ type: ACTIONS.GET_VEST_VOTES, content: { tokenID: nfts[0].id } })\n      stores.dispatcher.dispatch({ type: ACTIONS.GET_VEST_BALANCES, content: { tokenID: nfts[0].id } })\n    }\n\n    forceUpdate()\n  }\n\n  useEffect(() => {\n    const vestVotesReturned = (vals) => {\n      setVotes(vals.map((asset) => {\n        return {\n          address: asset?.address,\n          value: BigNumber((asset && asset.votePercent) ? asset.votePercent : 0).toNumber(0)\n        }\n      }))\n      forceUpdate()\n    }\n\n    const vestBalancesReturned = (vals) => {\n      setGauges(vals)\n      forceUpdate()\n    }\n\n    const stableSwapUpdated = () => {\n      ssUpdated()\n    }\n\n    const voteReturned = () => {\n      setVoteLoading(false)\n    }\n\n    ssUpdated()\n\n    // stores.dispatcher.dispatch({ type: ACTIONS.GET_VEST_NFTS, content: {} })\n\n    stores.emitter.on(ACTIONS.UPDATED, stableSwapUpdated);\n    stores.emitter.on(ACTIONS.VOTE_RETURNED, voteReturned);\n    stores.emitter.on(ACTIONS.ERROR, voteReturned);\n    stores.emitter.on(ACTIONS.VEST_VOTES_RETURNED, vestVotesReturned)\n    // stores.emitter.on(ACTIONS.VEST_NFTS_RETURNED, vestNFTsReturned)\n    stores.emitter.on(ACTIONS.VEST_BALANCES_RETURNED, vestBalancesReturned)\n\n    return () => {\n      stores.emitter.removeListener(ACTIONS.UPDATED, stableSwapUpdated);\n      stores.emitter.removeListener(ACTIONS.VOTE_RETURNED, voteReturned);\n      stores.emitter.removeListener(ACTIONS.ERROR, voteReturned);\n      stores.emitter.removeListener(ACTIONS.VEST_VOTES_RETURNED, vestVotesReturned)\n      // stores.emitter.removeListener(ACTIONS.VEST_NFTS_RETURNED, vestNFTsReturned)\n      stores.emitter.removeListener(ACTIONS.VEST_BALANCES_RETURNED, vestBalancesReturned)\n    };\n  }, []);\n\n  const onVote = () => {\n    setVoteLoading(true)\n    stores.dispatcher.dispatch({ type: ACTIONS.VOTE, content: { votes, tokenID: token.id }})\n  }\n\n  let totalVotes = votes.reduce((acc, curr) => { return BigNumber(acc).plus(BigNumber(curr.value).lt(0) ? (curr.value*-1) : curr.value).toNumber() }, 0 )\n\n  const handleChange = (event) => {\n    setToken(event.target.value);\n    stores.dispatcher.dispatch({ type: ACTIONS.GET_VEST_VOTES, content: { tokenID: event.target.value.id } })\n  }\n\n  const onSearchChanged = (event) => {\n    setSearch(event.target.value);\n  };\n\n  const onBribe = () => {\n    router.push('/bribe/create')\n  }\n\n  const renderMediumInput = (value, options) => {\n    return (\n      <div className={ classes.textField}>\n        <div className={ classes.mediumInputContainer}>\n          <Grid container>\n            <Grid item lg='auto' md='auto' sm={12} xs={12}>\n              <Typography variant=\"body2\" className={ classes.smallText }>Please select your veNFT:</Typography>\n            </Grid>\n\n            <Grid item lg={6} md={6} sm={12} xs={12}>\n              <div className={ classes.mediumInputAmount }>\n                <Select\n                  fullWidth\n                  value={ value }\n                  onChange={handleChange}\n                  InputProps={{\n                    className: classes.mediumInput,\n                  }}\n                >\n                  { options && options.map((option) => {\n                    return (\n                      <MenuItem key={option.id} value={option}>\n                        <div className={ classes.menuOption }>\n                          <Typography>Token #{option.id}</Typography>\n                          <div>\n                            <Typography align='right' className={ classes.smallerText }>{ formatCurrency(option.lockValue) }</Typography>\n                            <Typography color='textSecondary' className={ classes.smallerText }>{veToken?.symbol}</Typography>\n                          </div>\n                        </div>\n                      </MenuItem>\n                    )\n                  })}\n                </Select>\n              </div>\n            </Grid>\n          </Grid>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={ classes.container }>\n      <div className={ classes.topBarContainer }>\n\n        <Grid container spacing={1}>\n          <Grid item lg='auto' lg='auto' sm={12} xs={12}>\n            <Button\n              variant=\"contained\"\n              color=\"secondary\"\n              className={classes.button}\n              startIcon={<AddCircleOutlineIcon />}\n              size='large'\n              className={ classes.buttonOverride }\n              color='primary'\n              onClick={ onBribe }\n            >\n              <Typography className={ classes.actionButtonText }>{ `Create Bribe` }</Typography>\n            </Button>\n          </Grid>\n          <Grid item lg={true} md={true} sm={12} xs={12}>\n            <TextField\n              className={classes.searchContainer}\n              variant=\"outlined\"\n              fullWidth\n              placeholder=\"FTM, MIM, 0x...\"\n              value={search}\n              onChange={onSearchChanged}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <SearchIcon />\n                  </InputAdornment>\n                ),\n              }}\n            />\n          </Grid>\n          <Grid item lg='auto' lg='auto' sm={12} xs={12}>\n            <div className={ classes.tokenIDContainer }>\n              { renderMediumInput(token, vestNFTs) }\n            </div>\n          </Grid>\n        </Grid>\n      </div>\n      <Paper elevation={0} className={ classes.tableContainer }>\n        <GaugesTable gauges={ gauges.filter((pair) => {\n          if(!search || search === '') {\n            return true\n          }\n\n          const searchLower = search.toLowerCase()\n\n          if(pair.symbol.toLowerCase().includes(searchLower) || pair.address.toLowerCase().includes(searchLower) ||\n            pair.token0.symbol.toLowerCase().includes(searchLower) || pair.token0.address.toLowerCase().includes(searchLower) || pair.token0.name.toLowerCase().includes(searchLower) ||\n            pair.token1.symbol.toLowerCase().includes(searchLower) || pair.token1.address.toLowerCase().includes(searchLower) ||  pair.token1.name.toLowerCase().includes(searchLower)) {\n            return true\n          }\n\n          return false\n\n        }) } setParentSliderValues={setVotes} defaultVotes={votes} veToken={veToken} token={ token } />\n      </Paper>\n      <Paper elevation={10} className={ classes.actionButtons }>\n        <Grid container spacing={2}>\n          <Grid item lg={6}>\n            <div className={ classes.infoSection }>\n              <Typography>Voting Power Used: </Typography>\n              <Typography className={ `${BigNumber(totalVotes).gt(100) ? classes.errorText : classes.helpText}` }>{ totalVotes } %</Typography>\n            </div>\n          </Grid>\n          <Grid item lg={6}>\n            <Button\n              className={ classes.buttonOverrideFixed }\n              variant='contained'\n              size='large'\n              color='primary'\n              disabled={ voteLoading || BigNumber(totalVotes).eq(0) || BigNumber(totalVotes).gt(100) }\n              onClick={ onVote }\n              >\n              <Typography className={ classes.actionButtonText }>{ voteLoading ? `Casting Votes` : `Cast Votes` }</Typography>\n              { voteLoading && <CircularProgress size={10} className={ classes.loadingCircle } /> }\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}