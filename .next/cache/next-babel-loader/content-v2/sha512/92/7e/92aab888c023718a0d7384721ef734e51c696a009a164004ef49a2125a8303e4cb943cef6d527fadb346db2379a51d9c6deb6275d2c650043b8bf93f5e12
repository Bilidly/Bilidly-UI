{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/pierremarieriviere/Code/solidly-master/components/ssSwap/setup.js\";\nimport React, { useState, useEffect } from 'react';\nimport { TextField, Typography, InputAdornment, Button, MenuItem, IconButton, Dialog, CircularProgress, Tooltip } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport { withTheme } from '@material-ui/core/styles';\nimport { formatCurrency, formatAddress, formatCurrencyWithSymbol, formatCurrencySmall } from '../../utils';\nimport classes from './ssSwap.module.css';\nimport stores from '../../stores';\nimport { ACTIONS, ETHERSCAN_URL } from '../../stores/constants';\nimport BigNumber from 'bignumber.js';\n\nfunction Setup() {\n  const [, updateState] = React.useState();\n  const forceUpdate = React.useCallback(() => updateState({}), []);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: quoteLoading,\n    1: setQuoteLoading\n  } = useState(false);\n  const {\n    0: approvalLoading,\n    1: setApprovalLoading\n  } = useState(false);\n  const {\n    0: fromAmountValue,\n    1: setFromAmountValue\n  } = useState('');\n  const {\n    0: fromAmountError,\n    1: setFromAmountError\n  } = useState(false);\n  const {\n    0: fromAssetValue,\n    1: setFromAssetValue\n  } = useState(null);\n  const {\n    0: fromAssetError,\n    1: setFromAssetError\n  } = useState(false);\n  const {\n    0: fromAssetOptions,\n    1: setFromAssetOptions\n  } = useState([]);\n  const {\n    0: toAmountValue,\n    1: setToAmountValue\n  } = useState('');\n  const {\n    0: toAmountError,\n    1: setToAmountError\n  } = useState(false);\n  const {\n    0: toAssetValue,\n    1: setToAssetValue\n  } = useState(null);\n  const {\n    0: toAssetError,\n    1: setToAssetError\n  } = useState(false);\n  const {\n    0: toAssetOptions,\n    1: setToAssetOptions\n  } = useState([]);\n  const {\n    0: slippage,\n    1: setSlippage\n  } = useState('2');\n  const {\n    0: slippageError,\n    1: setSlippageError\n  } = useState(false);\n  const {\n    0: quoteError,\n    1: setQuoteError\n  } = useState(null);\n  const {\n    0: quote,\n    1: setQuote\n  } = useState(null);\n  useEffect(function () {\n    const errorReturned = () => {\n      setLoading(false);\n      setApprovalLoading(false);\n      setQuoteLoading(false);\n    };\n\n    const quoteReturned = val => {\n      if (!val) {\n        setQuoteLoading(false);\n        setQuote(null);\n        setToAmountValue('');\n        setQuoteError('Insufficient liquidity or no route available to complete swap');\n      }\n\n      if (val && val.inputs && val.inputs.fromAmount === fromAmountValue && val.inputs.fromAsset.address === fromAssetValue.address && val.inputs.toAsset.address === toAssetValue.address) {\n        setQuoteLoading(false);\n\n        if (BigNumber(val.output.finalValue).eq(0)) {\n          setQuote(null);\n          setToAmountValue('');\n          setQuoteError('Insufficient liquidity or no route available to complete swap');\n          return;\n        }\n\n        setToAmountValue(BigNumber(val.output.finalValue).toFixed(8));\n        setQuote(val);\n      }\n    };\n\n    const ssUpdated = () => {\n      const baseAsset = stores.stableSwapStore.getStore('baseAssets');\n      setToAssetOptions(baseAsset);\n      setFromAssetOptions(baseAsset);\n\n      if (baseAsset.length > 0 && toAssetValue == null) {\n        setToAssetValue(baseAsset[0]);\n      }\n\n      if (baseAsset.length > 0 && fromAssetValue == null) {\n        setFromAssetValue(baseAsset[1]);\n      }\n\n      forceUpdate();\n    };\n\n    const assetsUpdated = () => {\n      const baseAsset = stores.stableSwapStore.getStore('baseAssets');\n      setToAssetOptions(baseAsset);\n      setFromAssetOptions(baseAsset);\n    };\n\n    const swapReturned = event => {\n      setLoading(false);\n      setFromAmountValue('');\n      setToAmountValue('');\n      calculateReceiveAmount(0, fromAssetValue, toAssetValue);\n      setQuote(null);\n      setQuoteLoading(false);\n    };\n\n    stores.emitter.on(ACTIONS.ERROR, errorReturned);\n    stores.emitter.on(ACTIONS.UPDATED, ssUpdated);\n    stores.emitter.on(ACTIONS.SWAP_RETURNED, swapReturned);\n    stores.emitter.on(ACTIONS.QUOTE_SWAP_RETURNED, quoteReturned);\n    stores.emitter.on(ACTIONS.BASE_ASSETS_UPDATED, assetsUpdated);\n    ssUpdated();\n    return () => {\n      stores.emitter.removeListener(ACTIONS.ERROR, errorReturned);\n      stores.emitter.removeListener(ACTIONS.UPDATED, ssUpdated);\n      stores.emitter.removeListener(ACTIONS.SWAP_RETURNED, swapReturned);\n      stores.emitter.removeListener(ACTIONS.QUOTE_SWAP_RETURNED, quoteReturned);\n      stores.emitter.removeListener(ACTIONS.BASE_ASSETS_UPDATED, assetsUpdated);\n    };\n  }, [fromAmountValue, fromAssetValue, toAssetValue]);\n\n  const onAssetSelect = (type, value) => {\n    if (type === 'From') {\n      if (value.address === toAssetValue.address) {\n        setToAssetValue(fromAssetValue);\n        setFromAssetValue(toAssetValue);\n        calculateReceiveAmount(fromAmountValue, toAssetValue, fromAssetValue);\n      } else {\n        setFromAssetValue(value);\n        calculateReceiveAmount(fromAmountValue, value, toAssetValue);\n      }\n    } else {\n      if (value.address === fromAssetValue.address) {\n        setFromAssetError(toAssetValue);\n        setToAssetValue(fromAssetValue);\n        calculateReceiveAmount(fromAmountValue, toAssetValue, fromAssetValue);\n      } else {\n        setToAssetValue(value);\n        calculateReceiveAmount(fromAmountValue, fromAssetValue, value);\n      }\n    }\n\n    forceUpdate();\n  };\n\n  const fromAmountChanged = event => {\n    setFromAmountError(false);\n    setFromAmountValue(event.target.value);\n\n    if (event.target.value == '') {\n      setToAmountValue('');\n      setQuote(null);\n    } else {\n      calculateReceiveAmount(event.target.value, fromAssetValue, toAssetValue);\n    }\n  };\n\n  const toAmountChanged = event => {};\n\n  const onSlippageChanged = event => {\n    if (event.target.value == '' || !isNaN(event.target.value)) {\n      setSlippage(event.target.value);\n    }\n  };\n\n  const calculateReceiveAmount = (amount, from, to) => {\n    if (amount !== '' && !isNaN(amount) && to != null) {\n      setQuoteLoading(true);\n      setQuoteError(false);\n      stores.dispatcher.dispatch({\n        type: ACTIONS.QUOTE_SWAP,\n        content: {\n          fromAsset: from,\n          toAsset: to,\n          fromAmount: amount\n        }\n      });\n    }\n  };\n\n  const onSwap = () => {\n    setFromAmountError(false);\n    setFromAssetError(false);\n    setToAssetError(false);\n    let error = false;\n\n    if (!fromAmountValue || fromAmountValue === '' || isNaN(fromAmountValue)) {\n      setFromAmountError('From amount is required');\n      error = true;\n    } else {\n      if (!fromAssetValue.balance || isNaN(fromAssetValue.balance) || BigNumber(fromAssetValue.balance).lte(0)) {\n        setFromAmountError('Invalid balance');\n        error = true;\n      } else if (BigNumber(fromAmountValue).lt(0)) {\n        setFromAmountError('Invalid amount');\n        error = true;\n      } else if (fromAssetValue && BigNumber(fromAmountValue).gt(fromAssetValue.balance)) {\n        setFromAmountError(`Greater than your available balance`);\n        error = true;\n      }\n    }\n\n    if (!fromAssetValue || fromAssetValue === null) {\n      setFromAssetError('From asset is required');\n      error = true;\n    }\n\n    if (!toAssetValue || toAssetValue === null) {\n      setFromAssetError('To asset is required');\n      error = true;\n    }\n\n    if (!error) {\n      setLoading(true);\n      stores.dispatcher.dispatch({\n        type: ACTIONS.SWAP,\n        content: {\n          fromAsset: fromAssetValue,\n          toAsset: toAssetValue,\n          fromAmount: fromAmountValue,\n          toAmount: toAmountValue,\n          quote: quote,\n          slippage: slippage\n        }\n      });\n    }\n  };\n\n  const setBalance100 = () => {\n    setFromAmountValue(fromAssetValue.balance);\n    calculateReceiveAmount(fromAssetValue.balance, fromAssetValue, toAssetValue);\n  };\n\n  const swapAssets = () => {\n    const fa = fromAssetValue;\n    const ta = toAssetValue;\n    setFromAssetValue(ta);\n    setToAssetValue(fa);\n    calculateReceiveAmount(fromAmountValue, ta, fa);\n  };\n\n  const renderSwapInformation = () => {\n    if (quoteError) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.quoteLoader,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          className: classes.quoteError,\n          children: quoteError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this);\n    }\n\n    if (quoteLoading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.quoteLoader,\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 20,\n          className: classes.loadingCircle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this);\n    }\n\n    if (!quote) {\n      return;\n\n      /*#__PURE__*/\n      _jsxDEV(\"div\", {\n        className: classes.quoteLoader,\n        children: \" \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.depositInfoContainer,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        className: classes.depositInfoHeading,\n        children: \"Price Info\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.priceInfos,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.priceInfo,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.title,\n            children: formatCurrency(BigNumber(quote.inputs.fromAmount).div(quote.output.finalValue).toFixed(18))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.text,\n            children: `${fromAssetValue === null || fromAssetValue === void 0 ? void 0 : fromAssetValue.symbol} per ${toAssetValue === null || toAssetValue === void 0 ? void 0 : toAssetValue.symbol}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.priceInfo,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.title,\n            children: [\" \", formatCurrency(BigNumber(quote.output.finalValue).div(quote.inputs.fromAmount).toFixed(18)), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.text,\n            children: `${toAssetValue === null || toAssetValue === void 0 ? void 0 : toAssetValue.symbol} per ${fromAssetValue === null || fromAssetValue === void 0 ? void 0 : fromAssetValue.symbol}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.priceInfo,\n          children: renderSmallInput('slippage', slippage, slippageError, onSlippageChanged)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        className: classes.depositInfoHeading,\n        children: \"Route\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.route,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: classes.displayAssetIconSmall,\n          alt: \"\",\n          src: fromAssetValue ? `${fromAssetValue.logoURI}` : '',\n          height: \"40px\",\n          onError: e => {\n            e.target.onerror = null;\n            e.target.src = \"/tokens/unknown-logo.png\";\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.line,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.routeArrow,\n            children: /*#__PURE__*/_jsxDEV(ArrowForwardIosIcon, {\n              className: classes.routeArrowIcon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.stabIndicatorContainer,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.stabIndicator,\n              children: quote.output.routes[0].stable ? 'Stable' : 'Volatile'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), quote && quote.output && quote.output.routeAsset && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: classes.displayAssetIconSmall,\n            alt: \"\",\n            src: quote.output.routeAsset ? `${quote.output.routeAsset.logoURI}` : '',\n            height: \"40px\",\n            onError: e => {\n              e.target.onerror = null;\n              e.target.src = \"/tokens/unknown-logo.png\";\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.line,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.routeArrow,\n              children: /*#__PURE__*/_jsxDEV(ArrowForwardIosIcon, {\n                className: classes.routeArrowIcon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.stabIndicatorContainer,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                className: classes.stabIndicator,\n                children: quote.output.routes[1].stable ? 'Stable' : 'Volatile'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"img\", {\n          className: classes.displayAssetIconSmall,\n          alt: \"\",\n          src: toAssetValue ? `${toAssetValue.logoURI}` : '',\n          height: \"40px\",\n          onError: e => {\n            e.target.onerror = null;\n            e.target.src = \"/tokens/unknown-logo.png\";\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), BigNumber(quote.priceImpact).gt(0.5) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.warningContainer,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          className: BigNumber(quote.priceImpact).gt(5) ? classes.warningError : classes.warningWarning,\n          align: \"center\",\n          children: [\"Price impact \", formatCurrency(quote.priceImpact), \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this);\n  };\n\n  const renderSmallInput = (type, amountValue, amountError, amountChanged) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.textField,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputTitleContainerSlippage,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.inputBalanceSlippage,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.inputBalanceText,\n            noWrap: true,\n            children: \" Slippage \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.smallInputContainer,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          placeholder: \"0.00\",\n          fullWidth: true,\n          error: amountError,\n          helperText: amountError,\n          value: amountValue,\n          onChange: amountChanged,\n          disabled: loading,\n          InputProps: {\n            className: classes.smallInput,\n            endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"end\",\n              children: \"%\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 29\n            }, this)\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 7\n    }, this);\n  };\n\n  const renderMassiveInput = (type, amountValue, amountError, amountChanged, assetValue, assetError, assetOptions, onAssetSelect) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.textField,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputTitleContainer,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.inputBalance,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.inputBalanceText,\n            noWrap: true,\n            onClick: () => {\n              if (type === 'From') {\n                setBalance100();\n              }\n            },\n            children: [\"Balance:\", assetValue && assetValue.balance ? ' ' + formatCurrency(assetValue.balance) : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${classes.massiveInputContainer} ${(amountError || assetError) && classes.error}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.massiveInputAssetSelect,\n          children: /*#__PURE__*/_jsxDEV(AssetSelect, {\n            type: type,\n            value: assetValue,\n            assetOptions: assetOptions,\n            onSelect: onAssetSelect\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.massiveInputAmount,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            placeholder: \"0.00\",\n            fullWidth: true,\n            error: amountError,\n            helperText: amountError,\n            value: amountValue,\n            onChange: amountChanged,\n            disabled: loading || type === 'To',\n            InputProps: {\n              className: classes.largeInput\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"textSecondary\",\n            className: classes.smallerText,\n            children: assetValue === null || assetValue === void 0 ? void 0 : assetValue.symbol\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.swapInputs,\n    children: [renderMassiveInput('From', fromAmountValue, fromAmountError, fromAmountChanged, fromAssetValue, fromAssetError, fromAssetOptions, onAssetSelect), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.swapIconContainer,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.swapIconSubContainer,\n        children: /*#__PURE__*/_jsxDEV(ArrowDownwardIcon, {\n          className: classes.swapIcon,\n          onClick: swapAssets\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }, this), renderMassiveInput('To', toAmountValue, toAmountError, toAmountChanged, toAssetValue, toAssetError, toAssetOptions, onAssetSelect), renderSwapInformation(), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.actionsContainer,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        size: \"large\",\n        color: \"primary\",\n        className: classes.buttonOverride,\n        disabled: loading || quoteLoading,\n        onClick: onSwap,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          className: classes.actionButtonText,\n          children: loading ? `Swapping` : `Swap`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, this), loading && /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 10,\n          className: classes.loadingCircle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 426,\n    columnNumber: 5\n  }, this);\n}\n\nfunction AssetSelect({\n  type,\n  value,\n  assetOptions,\n  onSelect\n}) {\n  const {\n    0: open,\n    1: setOpen\n  } = useState(false);\n  const {\n    0: search,\n    1: setSearch\n  } = useState('');\n  const {\n    0: filteredAssetOptions,\n    1: setFilteredAssetOptions\n  } = useState([]);\n  const {\n    0: manageLocal,\n    1: setManageLocal\n  } = useState(false);\n\n  const openSearch = () => {\n    setSearch('');\n    setOpen(true);\n  };\n\n  useEffect(async function () {\n    let ao = assetOptions.filter(asset => {\n      if (search && search !== '') {\n        return asset.address.toLowerCase().includes(search.toLowerCase()) || asset.symbol.toLowerCase().includes(search.toLowerCase()) || asset.name.toLowerCase().includes(search.toLowerCase());\n      } else {\n        return true;\n      }\n    });\n    setFilteredAssetOptions(ao); //no options in our default list and its an address we search for the address\n\n    if (ao.length === 0 && search && search.length === 42) {\n      const baseAsset = await stores.stableSwapStore.getBaseAsset(event.target.value, true, true);\n    }\n\n    return () => {};\n  }, [assetOptions, search]);\n\n  const onSearchChanged = async event => {\n    setSearch(event.target.value);\n  };\n\n  const onLocalSelect = (type, asset) => {\n    setSearch('');\n    setManageLocal(false);\n    setOpen(false);\n    onSelect(type, asset);\n  };\n\n  const onClose = () => {\n    setManageLocal(false);\n    setSearch('');\n    setOpen(false);\n  };\n\n  const toggleLocal = () => {\n    setManageLocal(!manageLocal);\n  };\n\n  const deleteOption = token => {\n    stores.stableSwapStore.removeBaseAsset(token);\n  };\n\n  const viewOption = token => {\n    window.open(`${ETHERSCAN_URL}token/${token.address}`, '_blank');\n  };\n\n  const renderManageOption = (type, asset, idx) => {\n    return /*#__PURE__*/_jsxDEV(MenuItem, {\n      val: asset.address,\n      className: classes.assetSelectMenu,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectMenuItem,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.displayDualIconContainerSmall,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: classes.displayAssetIconSmall,\n            alt: \"\",\n            src: asset ? `${asset.logoURI}` : '',\n            height: \"60px\",\n            onError: e => {\n              e.target.onerror = null;\n              e.target.src = \"/tokens/unknown-logo.png\";\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectIconName,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: asset ? asset.symbol : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle1\",\n          color: \"textSecondary\",\n          children: asset ? asset.name : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectActions,\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: () => {\n            deleteOption(asset);\n          },\n          children: /*#__PURE__*/_jsxDEV(DeleteOutlineIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: () => {\n            viewOption(asset);\n          },\n          children: \"\\u2197\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 9\n      }, this)]\n    }, asset.address + '_' + idx, true, {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 7\n    }, this);\n  };\n\n  const renderAssetOption = (type, asset, idx) => {\n    return /*#__PURE__*/_jsxDEV(MenuItem, {\n      val: asset.address,\n      className: classes.assetSelectMenu,\n      onClick: () => {\n        onLocalSelect(type, asset);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectMenuItem,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.displayDualIconContainerSmall,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: classes.displayAssetIconSmall,\n            alt: \"\",\n            src: asset ? `${asset.logoURI}` : '',\n            height: \"60px\",\n            onError: e => {\n              e.target.onerror = null;\n              e.target.src = \"/tokens/unknown-logo.png\";\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectIconName,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: asset ? asset.symbol : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle1\",\n          color: \"textSecondary\",\n          children: asset ? asset.name : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectBalance,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: asset && asset.balance ? formatCurrency(asset.balance) : '0.00'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle1\",\n          color: \"textSecondary\",\n          children: 'Balance'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 9\n      }, this)]\n    }, asset.address + '_' + idx, true, {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 7\n    }, this);\n  };\n\n  const renderManageLocal = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.searchContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.searchInline,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            autoFocus: true,\n            variant: \"outlined\",\n            fullWidth: true,\n            placeholder: \"FTM, MIM, 0x...\",\n            value: search,\n            onChange: onSearchChanged,\n            InputProps: {\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 588,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 33\n              }, this)\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.assetSearchResults,\n          children: filteredAssetOptions ? filteredAssetOptions.filter(option => {\n            return option.local === true;\n          }).map((asset, idx) => {\n            return renderManageOption(type, asset, idx);\n          }) : []\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.manageLocalContainer,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: toggleLocal,\n          children: \"Back to Assets\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  };\n\n  const renderOptions = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.searchContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.searchInline,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            autoFocus: true,\n            variant: \"outlined\",\n            fullWidth: true,\n            placeholder: \"FTM, MIM, 0x...\",\n            value: search,\n            onChange: onSearchChanged,\n            InputProps: {\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 628,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 627,\n                columnNumber: 33\n              }, this)\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 619,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.assetSearchResults,\n          children: filteredAssetOptions ? filteredAssetOptions.sort((a, b) => {\n            if (BigNumber(a.balance).lt(b.balance)) return 1;\n            if (BigNumber(a.balance).gt(b.balance)) return -1;\n            if (a.symbol.toLowerCase() < b.symbol.toLowerCase()) return -1;\n            if (a.symbol.toLowerCase() > b.symbol.toLowerCase()) return 1;\n            return 0;\n          }).map((asset, idx) => {\n            return renderAssetOption(type, asset, idx);\n          }) : []\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 617,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.manageLocalContainer,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: toggleLocal,\n          children: \"Manage Local Assets\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 647,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.displaySelectContainer,\n      onClick: () => {\n        openSearch();\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectMenuItem,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.displayDualIconContainer,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: classes.displayAssetIcon,\n            alt: \"\",\n            src: value ? `${value.logoURI}` : '',\n            height: \"100px\",\n            onError: e => {\n              e.target.onerror = null;\n              e.target.src = \"/tokens/unknown-logo.png\";\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 663,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 661,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 660,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      onClose: onClose,\n      \"aria-labelledby\": \"simple-dialog-title\",\n      open: open,\n      children: [!manageLocal && renderOptions(), manageLocal && renderManageLocal()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 673,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 659,\n    columnNumber: 5\n  }, this);\n}\n\nexport default withTheme(Setup);","map":{"version":3,"sources":["/Users/pierremarieriviere/Code/solidly-master/components/ssSwap/setup.js"],"names":["React","useState","useEffect","TextField","Typography","InputAdornment","Button","MenuItem","IconButton","Dialog","CircularProgress","Tooltip","SearchIcon","ArrowDownwardIcon","ArrowForwardIosIcon","ToggleButton","DeleteOutlineIcon","withTheme","formatCurrency","formatAddress","formatCurrencyWithSymbol","formatCurrencySmall","classes","stores","ACTIONS","ETHERSCAN_URL","BigNumber","Setup","updateState","forceUpdate","useCallback","loading","setLoading","quoteLoading","setQuoteLoading","approvalLoading","setApprovalLoading","fromAmountValue","setFromAmountValue","fromAmountError","setFromAmountError","fromAssetValue","setFromAssetValue","fromAssetError","setFromAssetError","fromAssetOptions","setFromAssetOptions","toAmountValue","setToAmountValue","toAmountError","setToAmountError","toAssetValue","setToAssetValue","toAssetError","setToAssetError","toAssetOptions","setToAssetOptions","slippage","setSlippage","slippageError","setSlippageError","quoteError","setQuoteError","quote","setQuote","errorReturned","quoteReturned","val","inputs","fromAmount","fromAsset","address","toAsset","output","finalValue","eq","toFixed","ssUpdated","baseAsset","stableSwapStore","getStore","length","assetsUpdated","swapReturned","event","calculateReceiveAmount","emitter","on","ERROR","UPDATED","SWAP_RETURNED","QUOTE_SWAP_RETURNED","BASE_ASSETS_UPDATED","removeListener","onAssetSelect","type","value","fromAmountChanged","target","toAmountChanged","onSlippageChanged","isNaN","amount","from","to","dispatcher","dispatch","QUOTE_SWAP","content","onSwap","error","balance","lte","lt","gt","SWAP","toAmount","setBalance100","swapAssets","fa","ta","renderSwapInformation","quoteLoader","loadingCircle","depositInfoContainer","depositInfoHeading","priceInfos","priceInfo","title","div","text","symbol","renderSmallInput","route","displayAssetIconSmall","logoURI","e","onerror","src","line","routeArrow","routeArrowIcon","stabIndicatorContainer","stabIndicator","routes","stable","routeAsset","priceImpact","warningContainer","warningError","warningWarning","amountValue","amountError","amountChanged","textField","inputTitleContainerSlippage","inputBalanceSlippage","inputBalanceText","smallInputContainer","className","smallInput","endAdornment","renderMassiveInput","assetValue","assetError","assetOptions","inputTitleContainer","inputBalance","massiveInputContainer","massiveInputAssetSelect","massiveInputAmount","largeInput","smallerText","swapInputs","swapIconContainer","swapIconSubContainer","swapIcon","actionsContainer","buttonOverride","actionButtonText","AssetSelect","onSelect","open","setOpen","search","setSearch","filteredAssetOptions","setFilteredAssetOptions","manageLocal","setManageLocal","openSearch","ao","filter","asset","toLowerCase","includes","name","getBaseAsset","onSearchChanged","onLocalSelect","onClose","toggleLocal","deleteOption","token","removeBaseAsset","viewOption","window","renderManageOption","idx","assetSelectMenu","assetSelectMenuItem","displayDualIconContainerSmall","assetSelectIconName","assetSelectActions","renderAssetOption","assetSelectBalance","renderManageLocal","searchContainer","searchInline","startAdornment","assetSearchResults","option","local","map","manageLocalContainer","renderOptions","sort","a","b","displaySelectContainer","displayDualIconContainer","displayAssetIcon"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  TextField,\n  Typography,\n  InputAdornment,\n  Button,\n  MenuItem,\n  IconButton,\n  Dialog,\n  CircularProgress,\n  Tooltip\n} from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\n\nimport { withTheme } from '@material-ui/core/styles';\n\nimport { formatCurrency, formatAddress, formatCurrencyWithSymbol, formatCurrencySmall } from '../../utils'\n\nimport classes from './ssSwap.module.css'\n\nimport stores from '../../stores'\nimport {\n  ACTIONS,\n  ETHERSCAN_URL\n} from '../../stores/constants'\nimport BigNumber from 'bignumber.js'\n\nfunction Setup() {\n\n  const [, updateState] = React.useState();\n  const forceUpdate = React.useCallback(() => updateState({}), []);\n\n  const [ loading, setLoading ] = useState(false)\n  const [ quoteLoading, setQuoteLoading ] = useState(false)\n  const [ approvalLoading, setApprovalLoading ] = useState(false)\n\n  const [ fromAmountValue, setFromAmountValue ] = useState('')\n  const [ fromAmountError, setFromAmountError ] = useState(false)\n  const [ fromAssetValue, setFromAssetValue ] = useState(null)\n  const [ fromAssetError, setFromAssetError ] = useState(false)\n  const [ fromAssetOptions, setFromAssetOptions ] = useState([])\n\n  const [ toAmountValue, setToAmountValue ] = useState('')\n  const [ toAmountError, setToAmountError ] = useState(false)\n  const [ toAssetValue, setToAssetValue ] = useState(null)\n  const [ toAssetError, setToAssetError ] = useState(false)\n  const [ toAssetOptions, setToAssetOptions ] = useState([])\n\n  const [ slippage, setSlippage ] = useState('2')\n  const [ slippageError, setSlippageError ] = useState(false)\n\n  const [ quoteError, setQuoteError ] = useState(null)\n  const [ quote, setQuote ] = useState(null)\n\n  useEffect(function() {\n    const errorReturned = () => {\n      setLoading(false)\n      setApprovalLoading(false)\n      setQuoteLoading(false)\n    }\n\n    const quoteReturned = (val) => {\n      if(!val) {\n        setQuoteLoading(false)\n        setQuote(null)\n        setToAmountValue('')\n        setQuoteError('Insufficient liquidity or no route available to complete swap')\n      }\n      if(val && val.inputs && val.inputs.fromAmount === fromAmountValue && val.inputs.fromAsset.address === fromAssetValue.address && val.inputs.toAsset.address === toAssetValue.address) {\n        setQuoteLoading(false)\n        if(BigNumber(val.output.finalValue).eq(0)) {\n          setQuote(null)\n          setToAmountValue('')\n          setQuoteError('Insufficient liquidity or no route available to complete swap')\n          return\n        }\n\n        setToAmountValue(BigNumber(val.output.finalValue).toFixed(8))\n        setQuote(val)\n      }\n    }\n\n    const ssUpdated = () => {\n      const baseAsset = stores.stableSwapStore.getStore('baseAssets')\n\n      setToAssetOptions(baseAsset)\n      setFromAssetOptions(baseAsset)\n\n      if(baseAsset.length > 0 && toAssetValue == null) {\n        setToAssetValue(baseAsset[0])\n      }\n\n      if(baseAsset.length > 0 && fromAssetValue == null) {\n        setFromAssetValue(baseAsset[1])\n      }\n\n      forceUpdate()\n    }\n\n    const assetsUpdated = () => {\n      const baseAsset = stores.stableSwapStore.getStore('baseAssets')\n\n      setToAssetOptions(baseAsset)\n      setFromAssetOptions(baseAsset)\n    }\n\n    const swapReturned = (event) => {\n      setLoading(false)\n      setFromAmountValue('')\n      setToAmountValue('')\n      calculateReceiveAmount(0, fromAssetValue, toAssetValue)\n      setQuote(null)\n      setQuoteLoading(false)\n    }\n\n    stores.emitter.on(ACTIONS.ERROR, errorReturned)\n    stores.emitter.on(ACTIONS.UPDATED, ssUpdated)\n    stores.emitter.on(ACTIONS.SWAP_RETURNED, swapReturned)\n    stores.emitter.on(ACTIONS.QUOTE_SWAP_RETURNED, quoteReturned)\n    stores.emitter.on(ACTIONS.BASE_ASSETS_UPDATED, assetsUpdated)\n\n    ssUpdated()\n\n    return () => {\n      stores.emitter.removeListener(ACTIONS.ERROR, errorReturned)\n      stores.emitter.removeListener(ACTIONS.UPDATED, ssUpdated)\n      stores.emitter.removeListener(ACTIONS.SWAP_RETURNED, swapReturned)\n      stores.emitter.removeListener(ACTIONS.QUOTE_SWAP_RETURNED, quoteReturned)\n      stores.emitter.removeListener(ACTIONS.BASE_ASSETS_UPDATED, assetsUpdated)\n    }\n  },[fromAmountValue, fromAssetValue, toAssetValue]);\n\n  const onAssetSelect = (type, value) => {\n    if(type === 'From') {\n\n      if(value.address === toAssetValue.address) {\n        setToAssetValue(fromAssetValue)\n        setFromAssetValue(toAssetValue)\n        calculateReceiveAmount(fromAmountValue, toAssetValue, fromAssetValue)\n      } else {\n        setFromAssetValue(value)\n        calculateReceiveAmount(fromAmountValue, value, toAssetValue)\n      }\n\n\n    } else {\n      if(value.address === fromAssetValue.address) {\n        setFromAssetError(toAssetValue)\n        setToAssetValue(fromAssetValue)\n        calculateReceiveAmount(fromAmountValue, toAssetValue, fromAssetValue)\n      } else {\n        setToAssetValue(value)\n        calculateReceiveAmount(fromAmountValue, fromAssetValue, value)\n      }\n    }\n\n    forceUpdate()\n  }\n\n  const fromAmountChanged = (event) => {\n    setFromAmountError(false)\n    setFromAmountValue(event.target.value)\n    if(event.target.value == '') {\n      setToAmountValue('')\n      setQuote(null)\n    } else {\n      calculateReceiveAmount(event.target.value, fromAssetValue, toAssetValue)\n    }\n  }\n\n  const toAmountChanged = (event) => {\n  }\n\n  const onSlippageChanged = (event) => {\n    if(event.target.value == '' || !isNaN(event.target.value)) {\n      setSlippage(event.target.value)\n    }\n  }\n\n  const calculateReceiveAmount = (amount, from, to) => {\n    if(amount !== '' && !isNaN(amount) && to != null) {\n\n      setQuoteLoading(true)\n      setQuoteError(false)\n\n      stores.dispatcher.dispatch({ type: ACTIONS.QUOTE_SWAP, content: {\n        fromAsset: from,\n        toAsset: to,\n        fromAmount: amount,\n      } })\n    }\n  }\n\n  const onSwap = () => {\n    setFromAmountError(false)\n    setFromAssetError(false)\n    setToAssetError(false)\n\n    let error = false\n\n    if(!fromAmountValue || fromAmountValue === '' || isNaN(fromAmountValue)) {\n      setFromAmountError('From amount is required')\n      error = true\n    } else {\n      if(!fromAssetValue.balance || isNaN(fromAssetValue.balance) || BigNumber(fromAssetValue.balance).lte(0))  {\n        setFromAmountError('Invalid balance')\n        error = true\n      } else if(BigNumber(fromAmountValue).lt(0)) {\n        setFromAmountError('Invalid amount')\n        error = true\n      } else if (fromAssetValue && BigNumber(fromAmountValue).gt(fromAssetValue.balance)) {\n        setFromAmountError(`Greater than your available balance`)\n        error = true\n      }\n    }\n\n    if(!fromAssetValue || fromAssetValue === null) {\n      setFromAssetError('From asset is required')\n      error = true\n    }\n\n    if(!toAssetValue || toAssetValue === null) {\n      setFromAssetError('To asset is required')\n      error = true\n    }\n\n    if(!error) {\n      setLoading(true)\n\n      stores.dispatcher.dispatch({ type: ACTIONS.SWAP, content: {\n        fromAsset: fromAssetValue,\n        toAsset: toAssetValue,\n        fromAmount: fromAmountValue,\n        toAmount: toAmountValue,\n        quote: quote,\n        slippage: slippage\n      } })\n    }\n  }\n\n  const setBalance100 = () => {\n    setFromAmountValue(fromAssetValue.balance)\n    calculateReceiveAmount(fromAssetValue.balance, fromAssetValue, toAssetValue)\n  }\n\n  const swapAssets = () => {\n    const fa = fromAssetValue\n    const ta = toAssetValue\n    setFromAssetValue(ta)\n    setToAssetValue(fa)\n    calculateReceiveAmount(fromAmountValue, ta, fa)\n  }\n\n  const renderSwapInformation = () => {\n\n    if(quoteError) {\n      return (\n        <div className={ classes.quoteLoader }>\n          <Typography className={ classes.quoteError }>{ quoteError }</Typography>\n        </div>\n      )\n    }\n\n    if(quoteLoading) {\n      return (\n        <div className={ classes.quoteLoader }>\n          <CircularProgress size={20} className={ classes.loadingCircle } />\n        </div>\n      )\n    }\n\n    if(!quote) {\n      return\n        <div className={ classes.quoteLoader }> </div>\n    }\n\n    return (\n      <div className={ classes.depositInfoContainer }>\n        <Typography className={ classes.depositInfoHeading } >Price Info</Typography>\n        <div className={ classes.priceInfos}>\n          <div className={ classes.priceInfo }>\n            <Typography className={ classes.title } >{ formatCurrency(BigNumber(quote.inputs.fromAmount).div(quote.output.finalValue).toFixed(18)) }</Typography>\n            <Typography className={ classes.text } >{ `${fromAssetValue?.symbol} per ${toAssetValue?.symbol}` }</Typography>\n          </div>\n          <div className={ classes.priceInfo }>\n            <Typography className={ classes.title } > { formatCurrency(BigNumber(quote.output.finalValue).div(quote.inputs.fromAmount).toFixed(18)) } </Typography>\n            <Typography className={ classes.text } >{ `${toAssetValue?.symbol} per ${fromAssetValue?.symbol}` }</Typography>\n          </div>\n          <div className={ classes.priceInfo }>\n            { renderSmallInput('slippage', slippage, slippageError, onSlippageChanged) }\n          </div>\n        </div>\n        <Typography className={ classes.depositInfoHeading } >Route</Typography>\n        <div className={ classes.route }>\n          <img\n            className={ classes.displayAssetIconSmall }\n            alt=\"\"\n            src={ fromAssetValue ? `${fromAssetValue.logoURI}` : '' }\n            height='40px'\n            onError={(e)=>{e.target.onerror = null; e.target.src=\"/tokens/unknown-logo.png\"}}\n          />\n          <div className={ classes.line }>\n            <div className={classes.routeArrow}>\n              <ArrowForwardIosIcon className={classes.routeArrowIcon} />\n            </div>\n            <div className={ classes.stabIndicatorContainer }>\n              <Typography className={ classes.stabIndicator }>{ quote.output.routes[0].stable ? 'Stable' : 'Volatile' }</Typography>\n            </div>\n          </div>\n          { quote && quote.output && quote.output.routeAsset &&\n            <>\n              <img\n                className={ classes.displayAssetIconSmall }\n                alt=\"\"\n                src={ quote.output.routeAsset ? `${quote.output.routeAsset.logoURI}` : '' }\n                height='40px'\n                onError={(e)=>{e.target.onerror = null; e.target.src=\"/tokens/unknown-logo.png\"}}\n              />\n              <div className={ classes.line }>\n                <div className={classes.routeArrow}>\n                  <ArrowForwardIosIcon className={classes.routeArrowIcon} />\n                </div>\n                <div className={ classes.stabIndicatorContainer }>\n                  <Typography className={ classes.stabIndicator }>{ quote.output.routes[1].stable ? 'Stable' : 'Volatile' }</Typography>\n                </div>\n              </div>\n            </>\n          }\n          <img\n            className={ classes.displayAssetIconSmall }\n            alt=\"\"\n            src={ toAssetValue ? `${toAssetValue.logoURI}` : '' }\n            height='40px'\n            onError={(e)=>{e.target.onerror = null; e.target.src=\"/tokens/unknown-logo.png\"}}\n          />\n        </div>\n        {\n          BigNumber(quote.priceImpact).gt(0.5) &&\n            <div className={ classes.warningContainer }>\n              <Typography className={ BigNumber(quote.priceImpact).gt(5) ? classes.warningError : classes.warningWarning } align='center'>Price impact { formatCurrency(quote.priceImpact) }%</Typography>\n            </div>\n        }\n      </div>\n    )\n  }\n\n  const renderSmallInput = (type, amountValue, amountError, amountChanged) => {\n    return (\n      <div className={ classes.textField}>\n        <div className={ classes.inputTitleContainerSlippage }>\n          <div className={ classes.inputBalanceSlippage }>\n            <Typography className={ classes.inputBalanceText } noWrap > Slippage </Typography>\n          </div>\n        </div>\n        <div className={ classes.smallInputContainer }>\n          <TextField\n            placeholder='0.00'\n            fullWidth\n            error={ amountError }\n            helperText={ amountError }\n            value={ amountValue }\n            onChange={ amountChanged }\n            disabled={ loading }\n            InputProps={{\n              className: classes.smallInput,\n              endAdornment: <InputAdornment position=\"end\">\n                %\n              </InputAdornment>,\n            }}\n          />\n        </div>\n      </div>\n    )\n  }\n\n  const renderMassiveInput = (type, amountValue, amountError, amountChanged, assetValue, assetError, assetOptions, onAssetSelect) => {\n\n    return (\n      <div className={ classes.textField}>\n        <div className={ classes.inputTitleContainer }>\n          <div className={ classes.inputBalance }>\n            <Typography className={ classes.inputBalanceText } noWrap onClick={ () => {\n              if(type === 'From') {\n                setBalance100()\n              }\n            }}>\n              Balance:\n              { (assetValue && assetValue.balance) ?\n                ' ' +   formatCurrency(assetValue.balance) :\n                ''\n              }\n            </Typography>\n          </div>\n        </div>\n        <div className={ `${classes.massiveInputContainer} ${ (amountError || assetError) && classes.error }` }>\n          <div className={ classes.massiveInputAssetSelect }>\n            <AssetSelect type={type} value={ assetValue } assetOptions={ assetOptions } onSelect={ onAssetSelect } />\n          </div>\n          <div className={ classes.massiveInputAmount }>\n            <TextField\n              placeholder='0.00'\n              fullWidth\n              error={ amountError }\n              helperText={ amountError }\n              value={ amountValue }\n              onChange={ amountChanged }\n              disabled={ loading || type === 'To' }\n              InputProps={{\n                className: classes.largeInput\n              }}\n            />\n\n            <Typography color='textSecondary' className={ classes.smallerText }>{ assetValue?.symbol }</Typography>\n\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={ classes.swapInputs }>\n      { renderMassiveInput('From', fromAmountValue, fromAmountError, fromAmountChanged, fromAssetValue, fromAssetError, fromAssetOptions, onAssetSelect) }\n      <div className={ classes.swapIconContainer }>\n        <div className={ classes.swapIconSubContainer }>\n          <ArrowDownwardIcon className={ classes.swapIcon } onClick={ swapAssets }/>\n        </div>\n      </div>\n      { renderMassiveInput('To', toAmountValue, toAmountError, toAmountChanged, toAssetValue, toAssetError, toAssetOptions, onAssetSelect) }\n      { renderSwapInformation() }\n      <div className={ classes.actionsContainer }>\n        <Button\n          variant='contained'\n          size='large'\n          color='primary'\n          className={classes.buttonOverride}\n          disabled={ loading || quoteLoading }\n          onClick={ onSwap }\n          >\n          <Typography className={ classes.actionButtonText }>{ loading ? `Swapping` : `Swap` }</Typography>\n          { loading && <CircularProgress size={10} className={ classes.loadingCircle } /> }\n        </Button>\n      </div>\n    </div>\n  )\n}\n\nfunction AssetSelect({ type, value, assetOptions, onSelect }) {\n\n  const [ open, setOpen ] = useState(false);\n  const [ search, setSearch ] = useState('')\n  const [ filteredAssetOptions, setFilteredAssetOptions ] = useState([])\n\n  const [ manageLocal, setManageLocal ] = useState(false)\n\n  const openSearch = () => {\n    setSearch('')\n    setOpen(true)\n  };\n\n  useEffect(async function() {\n\n    let ao = assetOptions.filter((asset) => {\n      if(search && search !== '') {\n        return asset.address.toLowerCase().includes(search.toLowerCase()) ||\n          asset.symbol.toLowerCase().includes(search.toLowerCase()) ||\n          asset.name.toLowerCase().includes(search.toLowerCase())\n      } else {\n        return true\n      }\n    })\n\n    setFilteredAssetOptions(ao)\n\n    //no options in our default list and its an address we search for the address\n    if(ao.length === 0 && search && search.length === 42) {\n      const baseAsset = await stores.stableSwapStore.getBaseAsset(event.target.value, true, true)\n    }\n\n    return () => {\n    }\n  }, [assetOptions, search]);\n\n\n  const onSearchChanged = async (event) => {\n    setSearch(event.target.value)\n  }\n\n  const onLocalSelect = (type, asset) => {\n    setSearch('')\n    setManageLocal(false)\n    setOpen(false)\n    onSelect(type, asset)\n  }\n\n  const onClose = () => {\n    setManageLocal(false)\n    setSearch('')\n    setOpen(false)\n  }\n\n  const toggleLocal = () => {\n    setManageLocal(!manageLocal)\n  }\n\n  const deleteOption = (token) => {\n    stores.stableSwapStore.removeBaseAsset(token)\n  }\n\n  const viewOption = (token) => {\n    window.open(`${ETHERSCAN_URL}token/${token.address}`, '_blank')\n  }\n\n  const renderManageOption = (type, asset, idx) => {\n    return (\n      <MenuItem val={ asset.address } key={ asset.address+'_'+idx } className={ classes.assetSelectMenu } >\n        <div className={ classes.assetSelectMenuItem }>\n          <div className={ classes.displayDualIconContainerSmall }>\n            <img\n              className={ classes.displayAssetIconSmall }\n              alt=\"\"\n              src={ asset ? `${asset.logoURI}` : '' }\n              height='60px'\n              onError={(e)=>{e.target.onerror = null; e.target.src=\"/tokens/unknown-logo.png\"}}\n            />\n          </div>\n        </div>\n        <div className={ classes.assetSelectIconName }>\n          <Typography variant='h5'>{ asset ? asset.symbol : '' }</Typography>\n          <Typography variant='subtitle1' color='textSecondary'>{ asset ? asset.name : '' }</Typography>\n        </div>\n        <div className={ classes.assetSelectActions}>\n          <IconButton onClick={ () => { deleteOption(asset) } }>\n            <DeleteOutlineIcon />\n          </IconButton>\n          <IconButton onClick={ () => { viewOption(asset) } }>\n            ↗\n          </IconButton>\n        </div>\n      </MenuItem>\n    )\n  }\n\n  const renderAssetOption = (type, asset, idx) => {\n    return (\n      <MenuItem val={ asset.address } key={ asset.address+'_'+idx } className={ classes.assetSelectMenu } onClick={ () => { onLocalSelect(type, asset) } }>\n        <div className={ classes.assetSelectMenuItem }>\n          <div className={ classes.displayDualIconContainerSmall }>\n            <img\n              className={ classes.displayAssetIconSmall }\n              alt=\"\"\n              src={ asset ? `${asset.logoURI}` : '' }\n              height='60px'\n              onError={(e)=>{e.target.onerror = null; e.target.src=\"/tokens/unknown-logo.png\"}}\n            />\n          </div>\n        </div>\n        <div className={ classes.assetSelectIconName }>\n          <Typography variant='h5'>{ asset ? asset.symbol : '' }</Typography>\n          <Typography variant='subtitle1' color='textSecondary'>{ asset ? asset.name : '' }</Typography>\n        </div>\n        <div className={ classes.assetSelectBalance}>\n          <Typography variant='h5'>{ (asset && asset.balance) ? formatCurrency(asset.balance) : '0.00' }</Typography>\n          <Typography variant='subtitle1' color='textSecondary'>{ 'Balance' }</Typography>\n        </div>\n      </MenuItem>\n    )\n  }\n\n  const renderManageLocal = () => {\n    return (\n      <>\n        <div className={ classes.searchContainer }>\n          <div className={ classes.searchInline }>\n            <TextField\n              autoFocus\n              variant=\"outlined\"\n              fullWidth\n              placeholder=\"FTM, MIM, 0x...\"\n              value={ search }\n              onChange={ onSearchChanged }\n              InputProps={{\n                startAdornment: <InputAdornment position=\"start\">\n                  <SearchIcon />\n                </InputAdornment>,\n              }}\n            />\n          </div>\n          <div className={ classes.assetSearchResults }>\n            {\n              filteredAssetOptions ? filteredAssetOptions.filter((option) => {\n                return option.local === true\n              }).map((asset, idx) => {\n                return renderManageOption(type, asset, idx)\n              }) : []\n            }\n          </div>\n        </div>\n        <div className={ classes.manageLocalContainer }>\n          <Button\n            onClick={ toggleLocal }\n            >\n            Back to Assets\n          </Button>\n        </div>\n      </>\n    )\n  }\n\n  const renderOptions = () => {\n    return (\n      <>\n        <div className={ classes.searchContainer }>\n          <div className={ classes.searchInline }>\n            <TextField\n              autoFocus\n              variant=\"outlined\"\n              fullWidth\n              placeholder=\"FTM, MIM, 0x...\"\n              value={ search }\n              onChange={ onSearchChanged }\n              InputProps={{\n                startAdornment: <InputAdornment position=\"start\">\n                  <SearchIcon />\n                </InputAdornment>,\n              }}\n            />\n          </div>\n          <div className={ classes.assetSearchResults }>\n            {\n              filteredAssetOptions ? filteredAssetOptions.sort((a, b) => {\n                if(BigNumber(a.balance).lt(b.balance)) return 1;\n                if(BigNumber(a.balance).gt(b.balance)) return -1;\n                if(a.symbol.toLowerCase()<b.symbol.toLowerCase()) return -1;\n                if(a.symbol.toLowerCase()>b.symbol.toLowerCase()) return 1;\n                return 0;\n              }).map((asset, idx) => {\n                return renderAssetOption(type, asset, idx)\n              }) : []\n            }\n          </div>\n        </div>\n        <div className={ classes.manageLocalContainer }>\n          <Button\n            onClick={ toggleLocal }\n            >\n            Manage Local Assets\n          </Button>\n        </div>\n      </>\n    )\n  }\n\n  return (\n    <React.Fragment>\n      <div className={ classes.displaySelectContainer } onClick={ () => { openSearch() } }>\n        <div className={ classes.assetSelectMenuItem }>\n          <div className={ classes.displayDualIconContainer }>\n            <img\n              className={ classes.displayAssetIcon }\n              alt=\"\"\n              src={ value ? `${value.logoURI}` : '' }\n              height='100px'\n              onError={(e)=>{e.target.onerror = null; e.target.src=\"/tokens/unknown-logo.png\"}}\n            />\n          </div>\n        </div>\n      </div>\n      <Dialog onClose={ onClose } aria-labelledby=\"simple-dialog-title\" open={ open } >\n        { !manageLocal && renderOptions() }\n        { manageLocal && renderManageLocal() }\n      </Dialog>\n    </React.Fragment>\n  )\n}\n\nexport default withTheme(Setup)\n"]},"metadata":{},"sourceType":"module"}