{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/pierremarieriviere/Code/solidly-master/components/ssBribeCreate/ssBribeCreate.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { Paper, Grid, Typography, Button, TextField, InputAdornment, CircularProgress, Tooltip, Dialog, MenuItem, IconButton, Select } from '@material-ui/core';\nimport BigNumber from 'bignumber.js';\nimport { formatCurrency } from '../../utils';\nimport classes from './ssBribeCreate.module.css';\nimport AddIcon from '@material-ui/icons/Add';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport stores from '../../stores';\nimport { ACTIONS, ETHERSCAN_URL } from '../../stores/constants';\nexport default function ssBribeCreate() {\n  const router = useRouter();\n  const {\n    0: createLoading,\n    1: setCreateLoading\n  } = useState(false);\n  const {\n    0: amount,\n    1: setAmount\n  } = useState('');\n  const {\n    0: amountError,\n    1: setAmountError\n  } = useState(false);\n  const {\n    0: asset,\n    1: setAsset\n  } = useState(null);\n  const {\n    0: assetOptions,\n    1: setAssetOptions\n  } = useState([]);\n  const {\n    0: gauge,\n    1: setGauge\n  } = useState(null);\n  const {\n    0: gaugeOptions,\n    1: setGaugeOptions\n  } = useState([]);\n\n  const ssUpdated = async () => {\n    const storeAssetOptions = stores.stableSwapStore.getStore('baseAssets');\n    let filteredStoreAssetOptions = storeAssetOptions.filter(option => {\n      return option.address !== 'FTM';\n    });\n    const storePairs = stores.stableSwapStore.getStore('pairs');\n    setAssetOptions(filteredStoreAssetOptions);\n    setGaugeOptions(storePairs);\n\n    if (filteredStoreAssetOptions.length > 0 && asset == null) {\n      setAsset(filteredStoreAssetOptions[0]);\n    }\n\n    if (storePairs.length > 0 && gauge == null) {\n      setGauge(storePairs[0]);\n    }\n  };\n\n  useEffect(() => {\n    const createReturned = res => {\n      setCreateLoading(false);\n      setAmount('');\n      onBack();\n    };\n\n    const errorReturned = () => {\n      setCreateLoading(false);\n    };\n\n    const assetsUpdated = () => {\n      const baseAsset = stores.stableSwapStore.getStore('baseAssets');\n      let filteredStoreAssetOptions = baseAsset.filter(option => {\n        return option.address !== 'FTM';\n      });\n      setAssetOptions(filteredStoreAssetOptions);\n    };\n\n    stores.emitter.on(ACTIONS.UPDATED, ssUpdated);\n    stores.emitter.on(ACTIONS.BRIBE_CREATED, createReturned);\n    stores.emitter.on(ACTIONS.ERROR, errorReturned);\n    stores.emitter.on(ACTIONS.BASE_ASSETS_UPDATED, assetsUpdated);\n    ssUpdated();\n    return () => {\n      stores.emitter.removeListener(ACTIONS.UPDATED, ssUpdated);\n      stores.emitter.removeListener(ACTIONS.BRIBE_CREATED, createReturned);\n      stores.emitter.removeListener(ACTIONS.ERROR, errorReturned);\n      stores.emitter.removeListener(ACTIONS.BASE_ASSETS_UPDATED, assetsUpdated);\n    };\n  }, []);\n\n  const setAmountPercent = (input, percent) => {\n    setAmountError(false);\n\n    if (input === 'amount') {\n      let am = BigNumber(asset.balance).times(percent).div(100).toFixed(asset.decimals);\n      setAmount(am);\n    }\n  };\n\n  const onCreate = () => {\n    setAmountError(false);\n    let error = false;\n\n    if (!amount || amount === '' || isNaN(amount)) {\n      setAmountError('From amount is required');\n      error = true;\n    } else {\n      if (!asset.balance || isNaN(asset.balance) || BigNumber(asset.balance).lte(0)) {\n        setAmountError('Invalid balance');\n        error = true;\n      } else if (BigNumber(amount).lt(0)) {\n        setAmountError('Invalid amount');\n        error = true;\n      } else if (asset && BigNumber(amount).gt(asset.balance)) {\n        setAmountError(`Greater than your available balance`);\n        error = true;\n      }\n    }\n\n    if (!asset || asset === null) {\n      setAmountError('From asset is required');\n      error = true;\n    }\n\n    if (!error) {\n      setCreateLoading(true);\n      stores.dispatcher.dispatch({\n        type: ACTIONS.CREATE_BRIBE,\n        content: {\n          asset: asset,\n          amount: amount,\n          gauge: gauge\n        }\n      });\n    }\n  };\n\n  const amountChanged = event => {\n    setAmountError(false);\n    setAmount(event.target.value);\n  };\n\n  const onAssetSelect = (type, value) => {\n    setAmountError(false);\n    setAsset(value);\n  };\n\n  const onGagugeSelect = event => {\n    setGauge(event.target.value);\n  };\n\n  const renderMassiveGaugeInput = (type, value, error, options, onChange) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.textField,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${classes.massiveInputContainer} ${error && classes.error}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.massiveInputAmount,\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            fullWidth: true,\n            value: value,\n            onChange: onChange,\n            InputProps: {\n              className: classes.largeInput\n            },\n            children: options && options.map(option => {\n              return /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: option,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: classes.menuOption,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: classes.doubleImages,\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      className: `${classes.someIcon} ${classes.img1Logo}`,\n                      alt: \"\",\n                      src: option && option.token0 ? `${option.token0.logoURI}` : '',\n                      height: \"70px\",\n                      onError: e => {\n                        e.target.onerror = null;\n                        e.target.src = \"/tokens/unknown-logo.png\";\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 160,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                      className: `${classes.someIcon} ${classes.img2Logo}`,\n                      alt: \"\",\n                      src: option && option.token1 ? `${option.token1.logoURI}` : '',\n                      height: \"70px\",\n                      onError: e => {\n                        e.target.onerror = null;\n                        e.target.src = \"/tokens/unknown-logo.png\";\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 167,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      className: classes.fillerText,\n                      children: [option.token0.symbol, \"/\", option.token1.symbol]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      color: \"textSecondary\",\n                      className: classes.smallerText,\n                      children: option !== null && option !== void 0 && option.isStable ? 'Stable Pool' : 'Volatile Pool'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 177,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 21\n                }, this)\n              }, option.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this);\n  };\n\n  const renderMassiveInput = (type, amountValue, amountError, amountChanged, assetValue, assetError, assetOptions, onAssetSelect) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.textField,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.inputTitleContainer,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.inputBalance,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.inputBalanceText,\n            noWrap: true,\n            onClick: () => {\n              setAmountPercent(type, 100);\n            },\n            children: [\"Balance:\", assetValue && assetValue.balance ? ' ' + formatCurrency(assetValue.balance) : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${classes.massiveInputContainer} ${(amountError || assetError) && classes.error}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.massiveInputAssetSelect,\n          children: /*#__PURE__*/_jsxDEV(AssetSelect, {\n            type: type,\n            value: assetValue,\n            assetOptions: assetOptions,\n            onSelect: onAssetSelect\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.massiveInputAmount,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            placeholder: \"0.00\",\n            fullWidth: true,\n            error: amountError,\n            helperText: amountError,\n            value: amount,\n            onChange: amountChanged,\n            disabled: createLoading,\n            InputProps: {\n              className: classes.largeInput\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            color: \"textSecondary\",\n            className: classes.smallerText,\n            children: asset === null || asset === void 0 ? void 0 : asset.symbol\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this);\n  };\n\n  const onBack = () => {\n    router.push('/vote');\n  };\n\n  const renderCreateInfo = () => {\n    var _gauge$token, _gauge$token2;\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.depositInfoContainer,\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        className: classes.depositInfoHeading,\n        children: [\"You are creating a bribe of \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: classes.highlight,\n          children: [formatCurrency(amount), \" \", asset === null || asset === void 0 ? void 0 : asset.symbol]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 91\n        }, this), \" to incentivize Vesters to vote for the \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: classes.highlight,\n          children: [gauge === null || gauge === void 0 ? void 0 : (_gauge$token = gauge.token0) === null || _gauge$token === void 0 ? void 0 : _gauge$token.symbol, \"/\", gauge === null || gauge === void 0 ? void 0 : (_gauge$token2 = gauge.token1) === null || _gauge$token2 === void 0 ? void 0 : _gauge$token2.symbol, \" Pool\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 218\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.retain,\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 0,\n      className: classes.container,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.titleSection,\n        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          placement: \"top\",\n          title: \"Back to Voting\",\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            className: classes.backButton,\n            onClick: onBack,\n            children: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {\n              className: classes.backIcon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          className: classes.titleText,\n          children: \"Create Bribe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.reAddPadding,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.inputsContainer,\n          children: [renderMassiveGaugeInput('gauge', gauge, null, gaugeOptions, onGagugeSelect), renderMassiveInput('amount', amount, amountError, amountChanged, asset, null, assetOptions, onAssetSelect), renderCreateInfo()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.actionsContainer,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            size: \"large\",\n            className: createLoading ? classes.multiApprovalButton : classes.buttonOverride,\n            color: \"primary\",\n            disabled: createLoading,\n            onClick: onCreate,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.actionButtonText,\n              children: createLoading ? `Creating` : `Create Bribe`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 15\n            }, this), createLoading && /*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 10,\n              className: classes.loadingCircle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 243,\n    columnNumber: 5\n  }, this);\n}\n\nfunction AssetSelect({\n  type,\n  value,\n  assetOptions,\n  onSelect\n}) {\n  const {\n    0: open,\n    1: setOpen\n  } = useState(false);\n  const {\n    0: search,\n    1: setSearch\n  } = useState('');\n  const {\n    0: filteredAssetOptions,\n    1: setFilteredAssetOptions\n  } = useState([]);\n  const {\n    0: manageLocal,\n    1: setManageLocal\n  } = useState(false);\n\n  const openSearch = () => {\n    setOpen(true);\n    setSearch('');\n  };\n\n  useEffect(function () {\n    let ao = assetOptions.filter(asset => {\n      if (search && search !== '') {\n        return asset.address.toLowerCase().includes(search.toLowerCase()) || asset.symbol.toLowerCase().includes(search.toLowerCase()) || asset.name.toLowerCase().includes(search.toLowerCase());\n      } else {\n        return true;\n      }\n    });\n    setFilteredAssetOptions(ao);\n    return () => {};\n  }, [assetOptions, search]);\n\n  const onSearchChanged = async event => {\n    setSearch(event.target.value);\n  };\n\n  const onLocalSelect = (type, asset) => {\n    setSearch('');\n    setManageLocal(false);\n    setOpen(false);\n    onSelect(type, asset);\n  };\n\n  const onClose = () => {\n    setManageLocal(false);\n    setSearch('');\n    setOpen(false);\n  };\n\n  const toggleLocal = () => {\n    setManageLocal(!manageLocal);\n  };\n\n  const deleteOption = token => {\n    stores.stableSwapStore.removeBaseAsset(token);\n  };\n\n  const viewOption = token => {\n    window.open(`${ETHERSCAN_URL}token/${token.address}`, '_blank');\n  };\n\n  const renderManageOption = (type, asset, idx) => {\n    return /*#__PURE__*/_jsxDEV(MenuItem, {\n      val: asset.address,\n      className: classes.assetSelectMenu,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectMenuItem,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.displayDualIconContainerSmall,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: classes.displayAssetIconSmall,\n            alt: \"\",\n            src: asset ? `${asset.logoURI}` : '',\n            height: \"60px\",\n            onError: e => {\n              e.target.onerror = null;\n              e.target.src = \"/tokens/unknown-logo.png\";\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectIconName,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: asset ? asset.symbol : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle1\",\n          color: \"textSecondary\",\n          children: asset ? asset.name : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectActions,\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: () => {\n            deleteOption(asset);\n          },\n          children: /*#__PURE__*/_jsxDEV(DeleteOutlineIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: () => {\n            viewOption(asset);\n          },\n          children: \"\\u2197\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this)]\n    }, asset.address + '_' + idx, true, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 7\n    }, this);\n  };\n\n  const renderAssetOption = (type, asset, idx) => {\n    return /*#__PURE__*/_jsxDEV(MenuItem, {\n      val: asset.address,\n      className: classes.assetSelectMenu,\n      onClick: () => {\n        onLocalSelect(type, asset);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectMenuItem,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.displayDualIconContainerSmall,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: classes.displayAssetIconSmall,\n            alt: \"\",\n            src: asset ? `${asset.logoURI}` : '',\n            height: \"60px\",\n            onError: e => {\n              e.target.onerror = null;\n              e.target.src = \"/tokens/unknown-logo.png\";\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectIconName,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: asset ? asset.symbol : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle1\",\n          color: \"textSecondary\",\n          children: asset ? asset.name : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectBalance,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: asset && asset.balance ? formatCurrency(asset.balance) : '0.00'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle1\",\n          color: \"textSecondary\",\n          children: 'Balance'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this)]\n    }, asset.address + '_' + idx, true, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this);\n  };\n\n  const renderManageLocal = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.searchContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.searchInline,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            autoFocus: true,\n            variant: \"outlined\",\n            fullWidth: true,\n            placeholder: \"FTM, MIM, 0x...\",\n            value: search,\n            onChange: onSearchChanged,\n            InputProps: {\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 33\n              }, this)\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.assetSearchResults,\n          children: filteredAssetOptions ? filteredAssetOptions.filter(option => {\n            return option.local === true;\n          }).map((asset, idx) => {\n            return renderManageOption(type, asset, idx);\n          }) : []\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.manageLocalContainer,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: toggleLocal,\n          children: \"Back to Assets\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  };\n\n  const renderOptions = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.searchContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.searchInline,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            autoFocus: true,\n            variant: \"outlined\",\n            fullWidth: true,\n            placeholder: \"FTM, MIM, 0x...\",\n            value: search,\n            onChange: onSearchChanged,\n            InputProps: {\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 33\n              }, this)\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.assetSearchResults,\n          children: filteredAssetOptions ? filteredAssetOptions.sort((a, b) => {\n            if (BigNumber(a.balance).lt(b.balance)) return 1;\n            if (BigNumber(a.balance).gt(b.balance)) return -1;\n            if (a.symbol.toLowerCase() < b.symbol.toLowerCase()) return -1;\n            if (a.symbol.toLowerCase() > b.symbol.toLowerCase()) return 1;\n            return 0;\n          }).map((asset, idx) => {\n            return renderAssetOption(type, asset, idx);\n          }) : []\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.manageLocalContainer,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: toggleLocal,\n          children: \"Manage Local Assets\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.displaySelectContainer,\n      onClick: () => {\n        openSearch();\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.assetSelectMenuItem,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.displayDualIconContainer,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: classes.displayAssetIcon,\n            alt: \"\",\n            src: value ? `${value.logoURI}` : '',\n            height: \"100px\",\n            onError: e => {\n              e.target.onerror = null;\n              e.target.src = \"/tokens/unknown-logo.png\";\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      onClose: onClose,\n      \"aria-labelledby\": \"simple-dialog-title\",\n      open: open,\n      children: [!manageLocal && renderOptions(), manageLocal && renderManageLocal()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 480,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/pierremarieriviere/Code/solidly-master/components/ssBribeCreate/ssBribeCreate.js"],"names":["React","useState","useEffect","useRouter","Paper","Grid","Typography","Button","TextField","InputAdornment","CircularProgress","Tooltip","Dialog","MenuItem","IconButton","Select","BigNumber","formatCurrency","classes","AddIcon","SearchIcon","ArrowBackIcon","DeleteOutlineIcon","stores","ACTIONS","ETHERSCAN_URL","ssBribeCreate","router","createLoading","setCreateLoading","amount","setAmount","amountError","setAmountError","asset","setAsset","assetOptions","setAssetOptions","gauge","setGauge","gaugeOptions","setGaugeOptions","ssUpdated","storeAssetOptions","stableSwapStore","getStore","filteredStoreAssetOptions","filter","option","address","storePairs","length","createReturned","res","onBack","errorReturned","assetsUpdated","baseAsset","emitter","on","UPDATED","BRIBE_CREATED","ERROR","BASE_ASSETS_UPDATED","removeListener","setAmountPercent","input","percent","am","balance","times","div","toFixed","decimals","onCreate","error","isNaN","lte","lt","gt","dispatcher","dispatch","type","CREATE_BRIBE","content","amountChanged","event","target","value","onAssetSelect","onGagugeSelect","renderMassiveGaugeInput","options","onChange","textField","massiveInputContainer","massiveInputAmount","className","largeInput","map","menuOption","doubleImages","someIcon","img1Logo","token0","logoURI","e","onerror","src","img2Logo","token1","fillerText","symbol","smallerText","isStable","id","renderMassiveInput","amountValue","assetValue","assetError","inputTitleContainer","inputBalance","inputBalanceText","massiveInputAssetSelect","push","renderCreateInfo","depositInfoContainer","depositInfoHeading","highlight","retain","container","titleSection","backButton","backIcon","titleText","reAddPadding","inputsContainer","actionsContainer","multiApprovalButton","buttonOverride","actionButtonText","loadingCircle","AssetSelect","onSelect","open","setOpen","search","setSearch","filteredAssetOptions","setFilteredAssetOptions","manageLocal","setManageLocal","openSearch","ao","toLowerCase","includes","name","onSearchChanged","onLocalSelect","onClose","toggleLocal","deleteOption","token","removeBaseAsset","viewOption","window","renderManageOption","idx","assetSelectMenu","assetSelectMenuItem","displayDualIconContainerSmall","displayAssetIconSmall","assetSelectIconName","assetSelectActions","renderAssetOption","assetSelectBalance","renderManageLocal","searchContainer","searchInline","startAdornment","assetSearchResults","local","manageLocalContainer","renderOptions","sort","a","b","displaySelectContainer","displayDualIconContainer","displayAssetIcon"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { Paper, Grid, Typography, Button, TextField, InputAdornment, CircularProgress, Tooltip, Dialog, MenuItem, IconButton, Select } from '@material-ui/core';\nimport BigNumber from 'bignumber.js';\nimport { formatCurrency } from '../../utils';\nimport classes from './ssBribeCreate.module.css';\n\nimport AddIcon from '@material-ui/icons/Add';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\n\nimport stores from '../../stores'\nimport {\n  ACTIONS,\n  ETHERSCAN_URL\n} from '../../stores/constants';\n\nexport default function ssBribeCreate() {\n\n  const router = useRouter();\n  const [ createLoading, setCreateLoading ] = useState(false)\n\n  const [ amount, setAmount ] = useState('')\n  const [ amountError, setAmountError ] = useState(false)\n  const [ asset, setAsset ] = useState(null)\n  const [ assetOptions, setAssetOptions ] = useState([])\n  const [ gauge, setGauge ] = useState(null)\n  const [ gaugeOptions, setGaugeOptions ] = useState([])\n\n  const ssUpdated = async () => {\n    const storeAssetOptions = stores.stableSwapStore.getStore('baseAssets')\n    let filteredStoreAssetOptions = storeAssetOptions.filter((option) => {\n      return option.address !== 'FTM'\n    })\n    const storePairs = stores.stableSwapStore.getStore('pairs')\n    setAssetOptions(filteredStoreAssetOptions)\n    setGaugeOptions(storePairs)\n\n    if(filteredStoreAssetOptions.length > 0 && asset == null) {\n      setAsset(filteredStoreAssetOptions[0])\n    }\n\n    if(storePairs.length > 0 && gauge == null) {\n      setGauge(storePairs[0])\n    }\n  }\n\n  useEffect(() => {\n    const createReturned = (res) => {\n      setCreateLoading(false)\n      setAmount('')\n\n      onBack()\n    }\n\n    const errorReturned = () => {\n      setCreateLoading(false)\n    }\n\n    const assetsUpdated = () => {\n      const baseAsset = stores.stableSwapStore.getStore('baseAssets')\n      let filteredStoreAssetOptions = baseAsset.filter((option) => {\n        return option.address !== 'FTM'\n      })\n      setAssetOptions(filteredStoreAssetOptions)\n    }\n\n    stores.emitter.on(ACTIONS.UPDATED, ssUpdated)\n    stores.emitter.on(ACTIONS.BRIBE_CREATED, createReturned)\n    stores.emitter.on(ACTIONS.ERROR, errorReturned)\n    stores.emitter.on(ACTIONS.BASE_ASSETS_UPDATED, assetsUpdated)\n\n    ssUpdated()\n\n    return () => {\n      stores.emitter.removeListener(ACTIONS.UPDATED, ssUpdated)\n      stores.emitter.removeListener(ACTIONS.BRIBE_CREATED, createReturned)\n      stores.emitter.removeListener(ACTIONS.ERROR, errorReturned)\n      stores.emitter.removeListener(ACTIONS.BASE_ASSETS_UPDATED, assetsUpdated)\n    };\n  }, []);\n\n  const setAmountPercent = (input, percent) => {\n    setAmountError(false)\n    if(input === 'amount') {\n      let am = BigNumber(asset.balance).times(percent).div(100).toFixed(asset.decimals)\n      setAmount(am)\n    }\n  }\n\n  const onCreate = () => {\n    setAmountError(false)\n\n    let error = false\n\n    if(!amount || amount === '' || isNaN(amount)) {\n      setAmountError('From amount is required')\n      error = true\n    } else {\n      if(!asset.balance || isNaN(asset.balance) || BigNumber(asset.balance).lte(0))  {\n        setAmountError('Invalid balance')\n        error = true\n      } else if(BigNumber(amount).lt(0)) {\n        setAmountError('Invalid amount')\n        error = true\n      } else if (asset && BigNumber(amount).gt(asset.balance)) {\n        setAmountError(`Greater than your available balance`)\n        error = true\n      }\n    }\n\n    if(!asset || asset === null) {\n      setAmountError('From asset is required')\n      error = true\n    }\n\n    if(!error) {\n      setCreateLoading(true)\n      stores.dispatcher.dispatch({ type: ACTIONS.CREATE_BRIBE, content: {\n        asset: asset,\n        amount: amount,\n        gauge: gauge\n      } })\n    }\n  }\n\n  const amountChanged = (event) => {\n    setAmountError(false)\n    setAmount(event.target.value)\n  }\n\n  const onAssetSelect = (type, value) => {\n    setAmountError(false)\n    setAsset(value)\n  }\n\n  const onGagugeSelect = (event) => {\n    setGauge(event.target.value)\n  }\n\n  const renderMassiveGaugeInput = (type, value, error, options, onChange) => {\n    return (\n      <div className={ classes.textField}>\n        <div className={ `${classes.massiveInputContainer} ${ (error) && classes.error }` }>\n          <div className={ classes.massiveInputAmount }>\n            <Select\n              fullWidth\n              value={ value }\n              onChange={ onChange }\n              InputProps={{\n                className: classes.largeInput,\n              }}\n            >\n              { options && options.map((option) => {\n                return (\n                  <MenuItem key={option.id} value={option}>\n                    <div className={ classes.menuOption }>\n                      <div className={ classes.doubleImages }>\n                        <img\n                          className={ `${classes.someIcon} ${classes.img1Logo}` }\n                          alt=\"\"\n                          src={ (option && option.token0) ? `${option.token0.logoURI}` : '' }\n                          height='70px'\n                          onError={(e)=>{e.target.onerror = null; e.target.src=\"/tokens/unknown-logo.png\"}}\n                        />\n                        <img\n                          className={ `${classes.someIcon} ${classes.img2Logo}` }\n                          alt=\"\"\n                          src={ (option && option.token1) ? `${option.token1.logoURI}` : '' }\n                          height='70px'\n                          onError={(e)=>{e.target.onerror = null; e.target.src=\"/tokens/unknown-logo.png\"}}\n                        />\n                      </div>\n                      <div>\n                        <Typography className={ classes.fillerText }>{option.token0.symbol}/{option.token1.symbol}</Typography>\n                        <Typography color='textSecondary' className={ classes.smallerText }>{ option?.isStable ? 'Stable Pool' : 'Volatile Pool' }</Typography>\n                      </div>\n                    </div>\n                  </MenuItem>\n                )\n              })}\n            </Select>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const renderMassiveInput = (type, amountValue, amountError, amountChanged, assetValue, assetError, assetOptions, onAssetSelect) => {\n    return (\n      <div className={ classes.textField}>\n        <div className={ classes.inputTitleContainer }>\n          <div className={ classes.inputBalance }>\n            <Typography className={ classes.inputBalanceText } noWrap onClick={ () => {\n              setAmountPercent(type, 100)\n            }}>\n              Balance:\n              { (assetValue && assetValue.balance) ?\n                ' ' +   formatCurrency(assetValue.balance) :\n                ''\n              }\n            </Typography>\n          </div>\n        </div>\n        <div className={ `${classes.massiveInputContainer} ${ (amountError || assetError) && classes.error }` }>\n          <div className={ classes.massiveInputAssetSelect }>\n            <AssetSelect type={type} value={ assetValue } assetOptions={ assetOptions } onSelect={ onAssetSelect } />\n          </div>\n          <div className={ classes.massiveInputAmount }>\n            <TextField\n              placeholder='0.00'\n              fullWidth\n              error={ amountError }\n              helperText={ amountError }\n              value={ amount }\n              onChange={ amountChanged }\n              disabled={ createLoading }\n              InputProps={{\n                className: classes.largeInput\n              }}\n            />\n            <Typography color='textSecondary' className={ classes.smallerText }>{ asset?.symbol }</Typography>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const onBack = () => {\n    router.push('/vote')\n  }\n\n  const renderCreateInfo = () => {\n    return (\n      <div className={ classes.depositInfoContainer }>\n        <Typography className={ classes.depositInfoHeading } >You are creating a bribe of <span className={classes.highlight}>{ formatCurrency(amount) } { asset?.symbol }</span> to incentivize Vesters to vote for the <span className={classes.highlight}>{ gauge?.token0?.symbol }/{ gauge?.token1?.symbol } Pool</span></Typography>\n      </div>\n    )\n  }\n\n  return (\n    <div className={classes.retain}>\n      <Paper elevation={0} className={ classes.container }>\n        <div className={ classes.titleSection }>\n          <Tooltip placement=\"top\" title=\"Back to Voting\">\n          <IconButton className={ classes.backButton } onClick={ onBack }>\n            <ArrowBackIcon className={ classes.backIcon } />\n          </IconButton>\n          </Tooltip>\n          <Typography className={ classes.titleText }>Create Bribe</Typography>\n        </div>\n        <div className={ classes.reAddPadding }>\n          <div className={ classes.inputsContainer }>\n            { renderMassiveGaugeInput('gauge', gauge, null, gaugeOptions, onGagugeSelect) }\n            { renderMassiveInput('amount', amount, amountError, amountChanged, asset, null, assetOptions, onAssetSelect) }\n            { renderCreateInfo() }\n          </div>\n          <div className={ classes.actionsContainer }>\n            <Button\n              variant='contained'\n              size='large'\n              className={ (createLoading) ? classes.multiApprovalButton : classes.buttonOverride }\n              color='primary'\n              disabled={ createLoading }\n              onClick={ onCreate }\n              >\n              <Typography className={ classes.actionButtonText }>{ createLoading ? `Creating` : `Create Bribe` }</Typography>\n              { createLoading && <CircularProgress size={10} className={ classes.loadingCircle } /> }\n            </Button>\n          </div>\n        </div>\n      </Paper>\n    </div>\n  );\n}\n\nfunction AssetSelect({ type, value, assetOptions, onSelect }) {\n\n  const [ open, setOpen ] = useState(false);\n  const [ search, setSearch ] = useState('')\n  const [ filteredAssetOptions, setFilteredAssetOptions ] = useState([])\n\n  const [ manageLocal, setManageLocal ] = useState(false)\n\n  const openSearch = () => {\n    setOpen(true)\n    setSearch('')\n  };\n\n  useEffect(function() {\n\n    let ao = assetOptions.filter((asset) => {\n      if(search && search !== '') {\n        return asset.address.toLowerCase().includes(search.toLowerCase()) ||\n          asset.symbol.toLowerCase().includes(search.toLowerCase()) ||\n          asset.name.toLowerCase().includes(search.toLowerCase())\n      } else {\n        return true\n      }\n    })\n\n    setFilteredAssetOptions(ao)\n\n    return () => {\n    }\n  },[assetOptions, search]);\n\n\n  const onSearchChanged = async (event) => {\n    setSearch(event.target.value)\n  }\n\n  const onLocalSelect = (type, asset) => {\n    setSearch('')\n    setManageLocal(false)\n    setOpen(false)\n    onSelect(type, asset)\n  }\n\n  const onClose = () => {\n    setManageLocal(false)\n    setSearch('')\n    setOpen(false)\n  }\n\n  const toggleLocal = () => {\n    setManageLocal(!manageLocal)\n  }\n\n  const deleteOption = (token) => {\n    stores.stableSwapStore.removeBaseAsset(token)\n  }\n\n  const viewOption = (token) => {\n    window.open(`${ETHERSCAN_URL}token/${token.address}`, '_blank')\n  }\n\n  const renderManageOption = (type, asset, idx) => {\n    return (\n      <MenuItem val={ asset.address } key={ asset.address+'_'+idx } className={ classes.assetSelectMenu } >\n        <div className={ classes.assetSelectMenuItem }>\n          <div className={ classes.displayDualIconContainerSmall }>\n            <img\n              className={ classes.displayAssetIconSmall }\n              alt=\"\"\n              src={ asset ? `${asset.logoURI}` : '' }\n              height='60px'\n              onError={(e)=>{e.target.onerror = null; e.target.src=\"/tokens/unknown-logo.png\"}}\n            />\n          </div>\n        </div>\n        <div className={ classes.assetSelectIconName }>\n          <Typography variant='h5'>{ asset ? asset.symbol : '' }</Typography>\n          <Typography variant='subtitle1' color='textSecondary'>{ asset ? asset.name : '' }</Typography>\n        </div>\n        <div className={ classes.assetSelectActions}>\n          <IconButton onClick={ () => { deleteOption(asset) } }>\n            <DeleteOutlineIcon />\n          </IconButton>\n          <IconButton onClick={ () => { viewOption(asset) } }>\n            ↗\n          </IconButton>\n        </div>\n      </MenuItem>\n    )\n  }\n\n  const renderAssetOption = (type, asset, idx) => {\n    return (\n      <MenuItem val={ asset.address } key={ asset.address+'_'+idx } className={ classes.assetSelectMenu } onClick={ () => { onLocalSelect(type, asset) } }>\n        <div className={ classes.assetSelectMenuItem }>\n          <div className={ classes.displayDualIconContainerSmall }>\n            <img\n              className={ classes.displayAssetIconSmall }\n              alt=\"\"\n              src={ asset ? `${asset.logoURI}` : '' }\n              height='60px'\n              onError={(e)=>{e.target.onerror = null; e.target.src=\"/tokens/unknown-logo.png\"}}\n            />\n          </div>\n        </div>\n        <div className={ classes.assetSelectIconName }>\n          <Typography variant='h5'>{ asset ? asset.symbol : '' }</Typography>\n          <Typography variant='subtitle1' color='textSecondary'>{ asset ? asset.name : '' }</Typography>\n        </div>\n        <div className={ classes.assetSelectBalance}>\n          <Typography variant='h5'>{ (asset && asset.balance) ? formatCurrency(asset.balance) : '0.00' }</Typography>\n          <Typography variant='subtitle1' color='textSecondary'>{ 'Balance' }</Typography>\n        </div>\n      </MenuItem>\n    )\n  }\n\n  const renderManageLocal = () => {\n    return (\n      <>\n        <div className={ classes.searchContainer }>\n          <div className={ classes.searchInline }>\n            <TextField\n              autoFocus\n              variant=\"outlined\"\n              fullWidth\n              placeholder=\"FTM, MIM, 0x...\"\n              value={ search }\n              onChange={ onSearchChanged }\n              InputProps={{\n                startAdornment: <InputAdornment position=\"start\">\n                  <SearchIcon />\n                </InputAdornment>,\n              }}\n            />\n          </div>\n          <div className={ classes.assetSearchResults }>\n            {\n              filteredAssetOptions ? filteredAssetOptions.filter((option) => {\n                return option.local === true\n              }).map((asset, idx) => {\n                return renderManageOption(type, asset, idx)\n              }) : []\n            }\n          </div>\n        </div>\n        <div className={ classes.manageLocalContainer }>\n          <Button\n            onClick={ toggleLocal }\n            >\n            Back to Assets\n          </Button>\n        </div>\n      </>\n    )\n  }\n\n  const renderOptions = () => {\n    return (\n      <>\n        <div className={ classes.searchContainer }>\n          <div className={ classes.searchInline }>\n            <TextField\n              autoFocus\n              variant=\"outlined\"\n              fullWidth\n              placeholder=\"FTM, MIM, 0x...\"\n              value={ search }\n              onChange={ onSearchChanged }\n              InputProps={{\n                startAdornment: <InputAdornment position=\"start\">\n                  <SearchIcon />\n                </InputAdornment>,\n              }}\n            />\n          </div>\n          <div className={ classes.assetSearchResults }>\n            {\n              filteredAssetOptions ? filteredAssetOptions.sort((a, b) => {\n                if(BigNumber(a.balance).lt(b.balance)) return 1;\n                if(BigNumber(a.balance).gt(b.balance)) return -1;\n                if(a.symbol.toLowerCase()<b.symbol.toLowerCase()) return -1;\n                if(a.symbol.toLowerCase()>b.symbol.toLowerCase()) return 1;\n                return 0;\n              }).map((asset, idx) => {\n                return renderAssetOption(type, asset, idx)\n              }) : []\n            }\n          </div>\n        </div>\n        <div className={ classes.manageLocalContainer }>\n          <Button\n            onClick={ toggleLocal }\n            >\n            Manage Local Assets\n          </Button>\n        </div>\n      </>\n    )\n  }\n\n  return (\n    <React.Fragment>\n      <div className={ classes.displaySelectContainer } onClick={ () => { openSearch() } }>\n        <div className={ classes.assetSelectMenuItem }>\n          <div className={ classes.displayDualIconContainer }>\n            <img\n              className={ classes.displayAssetIcon }\n              alt=\"\"\n              src={ value ? `${value.logoURI}` : '' }\n              height='100px'\n              onError={(e)=>{e.target.onerror = null; e.target.src=\"/tokens/unknown-logo.png\"}}\n            />\n          </div>\n        </div>\n      </div>\n      <Dialog onClose={ onClose } aria-labelledby=\"simple-dialog-title\" open={ open } >\n        { !manageLocal && renderOptions() }\n        { manageLocal && renderManageLocal() }\n      </Dialog>\n    </React.Fragment>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}